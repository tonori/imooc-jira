{"version":3,"sources":["utils/http.ts","context/auth-provider.ts","hooks/useMount.ts","hooks/useIsUnMounted.ts","hooks/useRequest.ts","context/auth-content.tsx","context/index.tsx","webpack:///./src/assets/logo.svg?1a2c","components/full-page-loading.tsx","hooks/useAuth.ts","hooks/useAsync.ts","pages/auth/register.tsx","pages/auth/login.tsx","assets/logo.svg","assets/left.svg","assets/right.svg","unauthenticated-app.tsx","styled-components/ContentScreenLayout.ts","hooks/useUrlQueryParam.ts","hooks/useDebounce.ts","hooks/useHttp.ts","hooks/useOptimisticOption.ts","hooks/useCURD.ts","utils/index.ts","page-hooks/project.ts","pages/project-list/project-popover.tsx","assets/software-logo.svg","components/authenticatedAppHeader.tsx","styled-components/FlexLayout.ts","page-hooks/projectUsers.ts","components/projectUserSelect.tsx","pages/project-list/search-form.tsx","components/pin.tsx","utils/createDeleteConfirm.tsx","pages/project-list/list.tsx","hooks/useDocumentTitle.ts","pages/project-list/validateRules.ts","pages/project-list/createProjectForm.tsx","page-hooks/useProjectIdInParam.ts","pages/project-list/editProjectForm.tsx","hooks/useControlModal.ts","pages/project-list/project-modal.tsx","page-hooks/taskType.ts","components/TaskTypeSelect.tsx","pages/boards/SearchPanel.tsx","pages/boards/SubmitInput.tsx","utils/dragReorder.ts","page-hooks/task.ts","pages/boards/TaskAction.tsx","pages/boards/TaskItem.tsx","page-hooks/boards.ts","pages/boards/BoardAction.tsx","hooks/useHasQueryParams.ts","pages/boards/AddTask.tsx","components/DragAndDrop.tsx","pages/boards/BoardItem.tsx","pages/boards/AddBoard.tsx","pages/boards/EditTaskModal.tsx","pages/boards/EditBoardModal.tsx","pages/boards/DragDropBoards.tsx","components/LoadingOutlined.tsx","pages/boards/index.tsx","page-hooks/taskGroup.ts","pages/task-group/DeleteTaskGroupButton.tsx","pages/task-group/AddTaskGroupModal.tsx","pages/task-group/index.tsx","components/DefaultRouteNavigation.tsx","pages/project/index.tsx","pages/project-list/index.tsx","authenticated-app.tsx","App.tsx","index.tsx"],"names":["apiUrl","process","http","endpoint","a","data","token","headers","customConfig","config","method","Authorization","toUpperCase","qs","stringify","body","JSON","window","fetch","then","response","json","ok","Promise","resolve","message","error","reject","localStorageKey","getToken","localStorage","getItem","setToken","user","setItem","logout","removeItem","useMount","callback","useEffect","useIsUnMounted","isUnmounted","useRef","current","useRequest","useState","loading","setLoading","setResponse","setError","request","finalPoint","httpConfig","Auth","undefined","res","catch","finally","AuthContext","createContext","displayName","AuthProvider","children","setUser","queryClient","useQueryClient","status","Provider","value","login","form","register","clear","AppProviders","client","QueryClient","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","x1","y1","x2","y2","id","stopColor","offset","stroke","strokeWidth","fillRule","d","fill","SvgLogo","_ref","svgRef","title","titleId","props","viewBox","xmlns","focusable","ref","ForwardRef","LoadingContainer","styled","div","FullPageLoading","delay","spinning","size","style","margin","width","color","useAuth","context","useContext","Error","defaultInitialState","useAsync","initialState","state","setState","isIdle","isPending","isError","isSuccess","run","promise","toString","setData","RegisterScreen","history","useHistory","Title","onFinish","username","password","replace","Item","name","hasFeedback","rules","required","placeholder","type","Password","dependencies","getFieldValue","validator","rule","htmlType","className","to","LoginScreen","values","Container","AuthenticatedCard","Card","Header","header","logo","Background","left","right","h2","UnauthenticatedApp","path","component","from","FlexColumnMain","main","FlexRowMain","ContentContainer","Content","useUrlQueryParam","useLocation","searchString","search","pathname","searchParams","useMemo","URLSearchParams","paramKeys","setSearchParams","useCallback","queryParam","push","reduce","prev","get","useDebounce","debounceValue","setDebounceValue","timer","setTimeout","clearTimeout","useHttp","useOptimisticOption","queryKey","onMutate","cancelQueries","previousItems","getQueryData","setQueryData","old","onError","newItem","notification","description","useCURD","useGetItem","param","useQuery","useGetItemById","params","enabled","useAddItem","useMutation","onSuccess","invalidateQueries","useEditItem","options","map","item","useDeleteItem","filter","cleanObject","object","result","forEach","selectValueToNumber","isNaN","Number","useProjectParam","useUrlQueryParams","urlQueryParam","setUrlQueryParam","personId","setParam","debounceParam","cleanedParam","useProjectCURD","PinProjectListItem","Link","ProjectPopover","projects","useGetProject","pinnedProjects","project","pin","hasPinnedProjects","Boolean","content","ghost","defaultActiveKey","Panel","collapsible","placement","SvgSoftwareLogo","HeaderLeft","AuthenticatedAppHeader","_logout","menu","onClick","info","padding","location","href","origin","overlay","e","preventDefault","FlexColumn","FlexBetween","useGetProjectUsers","ProjectUserSelect","users","allowClear","Option","SearchForm","layout","marginBottom","onChange","Pin","active","changeActive","restProps","count","num","createDeleteConfirm","confirm","Modal","icon","ExclamationCircleOutlined","okText","okType","cancelText","List","url","useRouteMatch","useEditProject","useDeleteProject","editProject","mutate","deleteProject","mutateAsync","deleteProjectButtonOnclick","onOk","onCancel","afterClose","deleteProjectConfirm","columns","disabled","render","_","sorter","b","localeCompare","dataIndex","find","created","dayjs","format","danger","rowKey","pagination","tableLoading","useDocumentTitle","oldTitle","document","validateRules","organization","CreateProjectForm","formInstance","setConfirmLoading","closeModal","useAddProject","labelCol","span","resetFields","onFinishFailed","preserve","label","useProjectIdInParam","projectId","EditProjectForm","useGetSingleProject","initialValues","isLoading","setFieldsValue","useControlModal","startPoint","visible","includes","action","k","ProjectModal","confirmLoading","Form","useForm","modalForm","create","edit","modalProps","destroyOnClose","submit","activeComponent","useGetTaskTypes","TaskTypeSelect","taskTypes","taskType","SearchPanel","taskParams","setTaskQueryParams","processorId","typeId","Input","_Input","Search","SubmitInput","onSubmit","enterButton","EnterOutlined","onSearch","insertBefore","list","toItem","removedItem","splice","toIndex","insertAfter","reorder","fromId","referenceId","copiedList","movingItemIndex","findIndex","targetIndex","useTaskCURD","cleanedQueryParam","TaskActionContainer","TaskAction","task","EditOutlined","DeleteOutlined","deleteTaskConfirm","TaskItem","TaskInfo","TaskTypeIcon","useBoardCURD","BoardAction","board","actions","deleteBoardConfirm","useHasQueryParams","AddTask","boardId","inputValue","setInputValue","useAddTask","addTask","hasQueryParam","RollbackOutlined","addTaskButton","addTaskInput","kanbanId","cloneElement","display","Drop","provided","isValidElement","droppableProps","innerRef","DropChild","forwardRef","Drag","draggableProps","dragHandleProps","BoardItem","tasks","TaskContainer","droppableId","direction","minHeight","index","draggableId","AddBoard","useAddBoard","addBoard","Text","fontSize","EditTaskModal","taskId","useGetTaskById","useEditTask","getLoading","mutateLoading","forceRender","formProps","EditBoardModal","useGetBoardById","useEditBoard","DragItemContainer","useDragEnd","cleanedTaskParams","getBoard","getTask","boardData","taskData","reorderBoard","useReorderBoard","reorderTask","toKanbanId","useReorderTask","destination","toId","fromBoardId","split","toBoardId","fromTask","toTask","fromKanbanId","DragDropBoards","getBoards","getTasks","boardsData","tasksData","onDragEnd","SpinOutlined","antIcon","LoadingOutlined","spin","indicator","Boards","useTaskParam","getProjectById","currentProjectData","getProjectLoading","boardTitle","marginLeft","useTaskGroupCURD","DeleteTaskGroupButton","taskGroup","deleteTaskGroupConfirm","AddTaskGroupModal","setValue","TaskGroup","currentProject","getTaskGroup","taskGroups","getTaskGroupLoading","getTasksLoading","dataSource","itemLayout","renderItem","listItemMeta","start","end","Meta","_tasks","epicId","taskLinks","DefaultRouteNavigation","SubMenu","Sider","Layout","currentActive","pathArray","theme","mode","selectedKeys","marginTop","Project","exact","ProjectList","projectList","ProjectListScreen","AuthenticatedApp","height","App","loadDevTools","ReactDOM","StrictMode","basename","getElementById"],"mappings":"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","file":"static/js/main.6b532b36.chunk.js","sourcesContent":["import qs from \"qs\";\n\nimport { message } from \"antd\";\n\nexport interface Config extends RequestInit {\n  token?: string;\n  data?: object;\n}\n\nconst apiUrl = process.env.REACT_APP_API_URL;\n\nexport const http = async (\n  endpoint: string,\n  { data, token, headers, ...customConfig }: Config = {}\n) => {\n  const config = {\n    method: \"GET\",\n    headers: {\n      Authorization: token ? `Bearer ${token}` : \"\",\n      \"Content-Type\": data ? \"application/json\" : \"\",\n    },\n    ...customConfig,\n  };\n\n  if (config.method.toUpperCase() === \"GET\") {\n    endpoint += `?${qs.stringify(data)}`;\n  } else {\n    config.body = JSON.stringify(data || {});\n  }\n\n  return window.fetch(apiUrl + endpoint, config).then(async (response) => {\n    const data = await response.json();\n    if (response.ok) {\n      return Promise.resolve(data);\n    } else {\n      message.error(data.message);\n      return Promise.reject(data);\n    }\n  });\n};\n","// 此文件包含了请求 登录 / 注册接口 及 读取 / 写入 / 删除 存储在 localStorage 中的 token 的方法\nimport { http } from \"utils/http\";\nimport { User } from \"types/user\";\n\nconst localStorageKey = \"__auth_provider_token__\";\n\nexport const getToken = () => window.localStorage.getItem(localStorageKey);\n\nexport const setToken = ({ user }: { user: User }) => {\n  window.localStorage.setItem(localStorageKey, user.token || \"\");\n};\n\nexport const login = (data: { username: string; password: string }) => {\n  return http(\"/login\", {\n    method: \"POST\",\n    token: undefined,\n    data,\n  }).then((response) => {\n    setToken(response);\n    return response.user;\n  });\n};\n\nexport const register = (data: { username: string; password: string }) => {\n  return http(\"/register\", {\n    method: \"POST\",\n    token: undefined,\n    data,\n  }).then((response) => {\n    setToken(response);\n    return response.user;\n  });\n};\n\nexport const logout = async () => {\n  window.localStorage.removeItem(localStorageKey);\n};\n","import { useEffect } from \"react\";\n\nconst useMount = (callback: () => void) => {\n  useEffect(() => {\n    callback();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n\nexport default useMount;\n","import { useRef, useEffect } from \"react\";\n\nconst useIsUnMounted = () => {\n  const isUnmounted = useRef(false);\n\n  useEffect(() => {\n    isUnmounted.current = false;\n    return () => {\n      isUnmounted.current = true;\n    };\n  }, []);\n\n  return isUnmounted;\n};\n\nexport default useIsUnMounted;\n","import { useState } from \"react\";\nimport { http, Config } from \"utils/http\";\nimport useIsUnMounted from \"hooks/useIsUnMounted\";\nimport * as Auth from \"context/auth-provider\";\nimport { message } from \"antd\";\n\nexport interface RequestProps extends Config {\n  finalPoint: string;\n}\n\nconst useRequest = <P>() => {\n  const [loading, setLoading] = useState(false);\n  const [response, setResponse] = useState<P>();\n  const [error, setError] = useState(null);\n\n  const isUnmounted = useIsUnMounted();\n\n  const request = async ({\n    finalPoint,\n    data,\n    ...customConfig\n  }: RequestProps) => {\n    setLoading(() => true);\n\n    const httpConfig = {\n      data,\n      token: Auth.getToken() || undefined,\n      ...customConfig,\n    };\n\n    return http(finalPoint, httpConfig)\n      .then((res) => {\n        if (!isUnmounted.current) {\n          setResponse(res);\n          return Promise.resolve(res);\n        }\n      })\n      .catch((error) => {\n        if (!isUnmounted.current) {\n          setError(error);\n          message.error(error.message);\n          return Promise.reject(error);\n        }\n      })\n      .finally(() => {\n        if (!isUnmounted.current) {\n          setLoading(() => false);\n        } else return Promise.reject(\"Component is unmounted\");\n      });\n  };\n\n  return {\n    loading,\n    response,\n    error,\n    request,\n  };\n};\n\nexport default useRequest;\n","import { createContext, ReactNode, useState } from \"react\";\nimport * as Auth from \"./auth-provider\";\nimport useMount from \"hooks/useMount\";\nimport useRequest from \"hooks/useRequest\";\nimport { useQueryClient } from \"react-query\";\nimport { User } from \"types/user\";\n\ninterface AuthForm {\n  username: string;\n  password: string;\n}\n\n// 创建 Context\nexport const AuthContext = createContext<\n  | {\n      user: User | null;\n      login: (form: AuthForm) => Promise<void>;\n      register: (form: AuthForm) => Promise<void>;\n      logout: () => Promise<void>;\n    }\n  | undefined\n>(undefined);\nAuthContext.displayName = \"AuthContext\";\n\n// AuthContext.Provider 的工厂函数\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const { request } = useRequest();\n  const token = Auth.getToken();\n  const queryClient = useQueryClient();\n\n  const login = (form: AuthForm) => Auth.login(form).then(setUser);\n  const register = (form: AuthForm) => Auth.register(form).then(setUser);\n  const logout = () =>\n    Auth.logout().then(() => {\n      queryClient.clear();\n      setUser(null);\n    });\n\n  // 页面初始化时如果 localStorage 中有 token，则尝试请求用户信息\n  useMount(() => {\n    token &&\n      request({\n        finalPoint: \"/me\",\n      })\n        .then((res) => {\n          setUser(res.user);\n        })\n        .catch((error) => {\n          error.status === 401 && Auth.logout();\n        });\n  });\n\n  return (\n    <AuthContext.Provider\n      children={children}\n      value={{ user, login, register, logout }}\n    />\n  );\n};\n","import { ReactNode } from \"react\";\nimport { QueryClientProvider, QueryClient } from \"react-query\";\nimport { AuthProvider } from \"./auth-content\";\n\nconst AppProviders = ({ children }: { children: ReactNode }) => {\n  return (\n    <QueryClientProvider client={new QueryClient()}>\n      {/* AuthProvider 返回 <AuthContext.Provider />*/}\n      <AuthProvider>{children}</AuthProvider>\n    </QueryClientProvider>\n  );\n};\n\nexport default AppProviders;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n  x1: \"98.0308675%\",\n  y1: \"0.160599572%\",\n  x2: \"58.8877062%\",\n  y2: \"40.7655246%\",\n  id: \"uid5\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#0052CC\",\n  offset: \"18%\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#2684FF\",\n  offset: \"100%\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\",\n  strokeWidth: 1,\n  fillRule: \"nonzero\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M22.9366667,4 L11.41,4 C11.41,5.3800098 11.9582068,6.703498 12.934021,7.67931228 C13.9098353,8.65512657 15.2333235,9.20333333 16.6133333,9.20333333 L18.7366667,9.20333333 L18.7366667,11.2533333 C18.7385054,14.1244521 21.0655479,16.4514946 23.9366667,16.4533333 L23.9366667,5 C23.9366667,4.44771525 23.4889514,4 22.9366667,4 Z\",\n  fill: \"currentColor\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M17.2333333,9.74333333 L5.70666667,9.74333333 C5.70850536,12.6144521 8.03554792,14.9414946 10.9066667,14.9433333 L13.03,14.9433333 L13.03,17 C13.0336786,19.8711178 15.3622132,22.196669 18.2333333,22.1966667 L18.2333333,10.7433333 C18.2333333,10.1910486 17.7856181,9.74333333 17.2333333,9.74333333 Z\",\n  fill: \"url(#uid5)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.5266667,15.4833333 L0,15.4833333 C3.51929402e-16,18.357055 2.32961169,20.6866667 5.20333333,20.6866667 L7.33333333,20.6866667 L7.33333333,22.7366667 C7.33516565,25.6051863 9.65815176,27.9311544 12.5266667,27.9366667 L12.5266667,16.4833333 C12.5266667,15.9310486 12.0789514,15.4833333 11.5266667,15.4833333 Z\",\n  fill: \"url(#uid5)\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M37.07,18.956 C37.07,20.646 36.394,21.842 34.418,21.842 C33.56,21.842 32.702,21.686 32,21.4 L32,23.662 C32.65,23.896 33.586,24.104 34.808,24.104 C38.032,24.104 39.41,21.946 39.41,18.8 L39.41,6.918 L37.07,6.918 L37.07,18.956 Z M42.894,7.568 C42.894,8.556 43.544,9.128 44.454,9.128 C45.364,9.128 46.014,8.556 46.014,7.568 C46.014,6.58 45.364,6.008 44.454,6.008 C43.544,6.008 42.894,6.58 42.894,7.568 Z M43.31,24 L45.546,24 L45.546,11 L43.31,11 L43.31,24 Z M48.926,24 L51.11,24 L51.11,16.33 C51.11,13.574 52.852,12.716 55.712,13.002 L55.712,10.818 C53.164,10.662 51.864,11.754 51.11,13.288 L51.11,11 L48.926,11 L48.926,24 Z M66.45,24 L66.45,21.66 C65.618,23.376 64.058,24.26 62.056,24.26 C58.598,24.26 56.856,21.322 56.856,17.5 C56.856,13.834 58.676,10.74 62.316,10.74 C64.214,10.74 65.67,11.598 66.45,13.288 L66.45,11 L68.686,11 L68.686,24 L66.45,24 Z M59.092,17.5 C59.092,20.62 60.34,22.18 62.654,22.18 C64.656,22.18 66.45,20.906 66.45,18.02 L66.45,16.98 C66.45,14.094 64.812,12.82 62.914,12.82 C60.392,12.82 59.092,14.484 59.092,17.5 Z\",\n  fillRule: \"evenodd\",\n  fill: \"inherit\"\n}));\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 69 32\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    focusable: \"false\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.6c866125.svg\";\nexport { ForwardRef as ReactComponent };","// Components\nimport { Spin } from \"antd\";\nimport styled from \"@emotion/styled\";\n\n// Resources\nimport { ReactComponent as SoftwareLogo } from \"assets/logo.svg\";\n\nconst LoadingContainer = styled.div`\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst FullPageLoading = () => (\n  <LoadingContainer>\n    <Spin delay={200} spinning={true} size=\"large\" style={{ margin: \"4rem\" }} />\n    <SoftwareLogo width=\"18rem\" color=\"rbg(38, 132, 255)\" />\n  </LoadingContainer>\n);\n\nexport default FullPageLoading;\n","import { useContext } from \"react\";\nimport { AuthContext } from \"context/auth-content\";\n\n// 在 Provider 下的各个组件需要使用 Context 中的数据时，可以直接使用 useAuth 钩子\nconst useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth 必须在 AuthProvider 中使用\");\n  }\n  return context;\n};\n\nexport default useAuth;\n","import { useState } from \"react\";\nimport useIsUnMounted from \"hooks/useIsUnMounted\";\n\ninterface State<D> {\n  error: Error | null;\n  data: D | null;\n  status: \"idle\" | \"pending\" | \"success\" | \"error\";\n}\n\nconst defaultInitialState: State<null> = {\n  status: \"idle\",\n  data: null,\n  error: null,\n};\n\nconst useAsync = <D>(initialState?: State<D>) => {\n  const [state, setState] = useState<State<D>>({\n    ...defaultInitialState,\n    ...initialState,\n  });\n\n  const isUnmounted = useIsUnMounted();\n\n  const setData = (data: D) =>\n    setState({\n      data,\n      status: \"success\",\n      error: null,\n    });\n\n  const setError = (error: Error) =>\n    setState({\n      error,\n      status: \"error\",\n      data: null,\n    });\n\n  const run = (promise: Promise<D>) => {\n    if (\n      !promise &&\n      !(Object.prototype.toString.call(promise) === \"[object Promise]\")\n    ) {\n      throw new Error(\"传入的需要是 Promise 对象\");\n    }\n\n    setState({ ...state, status: \"pending\" });\n\n    // 延迟设定\n    return promise\n      .then((data) => {\n        if (!isUnmounted.current) {\n          setState({ ...state, status: \"success\" });\n          setData(data);\n          return data;\n        }\n      })\n      .catch((error) => {\n        if (!isUnmounted.current) {\n          setState({ ...state, status: \"error\" });\n          setError(error);\n          return error;\n        }\n      })\n      .finally(() => {\n        if (isUnmounted.current)\n          return Promise.reject(\"Component is unmountend\");\n      });\n  };\n\n  return {\n    isIdle: state.status === \"idle\",\n    isPending: state.status === \"pending\",\n    isError: state.status === \"error\",\n    isSuccess: state.status === \"success\",\n    run,\n    ...state,\n  };\n};\n\nexport default useAsync;\n","// Components\nimport { Link } from \"react-router-dom\";\nimport { Title } from \"unauthenticated-app\";\nimport { Button, Form, Input } from \"antd\";\n\n// Hooks\nimport useAuth from \"hooks/useAuth\";\nimport useAsync from \"hooks/useAsync\";\nimport { useHistory } from \"react-router\";\n\n// Type\nimport { Rule } from \"antd/es/form\";\n\nconst RegisterScreen = () => {\n  const history = useHistory();\n  const { register } = useAuth();\n  const { run, isPending } = useAsync();\n\n  const confirmPasswordRules: Rule = ({ getFieldValue }) => ({\n    validator(rule, value) {\n      if (!value || getFieldValue(\"password\") === value) {\n        return Promise.resolve();\n      }\n      return Promise.reject(new Error(\"两次输入的密码不一致！\"));\n    },\n  });\n\n  const handleSubmit = ({\n    username,\n    password,\n  }: {\n    username: string;\n    password: string;\n  }) => {\n    run(register({ username, password })).then(() => history.replace(\"/\"));\n  };\n\n  return (\n    <div>\n      <Title>请注册</Title>\n      <Form onFinish={handleSubmit}>\n        <Form.Item\n          name=\"username\"\n          hasFeedback\n          rules={[{ required: true, message: \"请输入用户名\" }]}\n        >\n          <Input placeholder=\"用户名\" type=\"text\" />\n        </Form.Item>\n        <Form.Item\n          name=\"password\"\n          hasFeedback\n          rules={[{ required: true, message: \"请输入密码\" }]}\n        >\n          <Input.Password placeholder=\"密码\" />\n        </Form.Item>\n        <Form.Item\n          name=\"confirmPassword\"\n          dependencies={[\"password\"]}\n          hasFeedback\n          rules={[\n            { required: true, message: \"请确认密码\" },\n            confirmPasswordRules,\n          ]}\n        >\n          <Input.Password placeholder=\"请确认密码\" />\n        </Form.Item>\n        <Form.Item>\n          <Button\n            loading={isPending}\n            htmlType=\"submit\"\n            type=\"primary\"\n            className=\"d-block w-100\"\n          >\n            注册\n          </Button>\n        </Form.Item>\n      </Form>\n      <Link to=\"/login\" replace>\n        已经有账号了？直接登录\n      </Link>\n    </div>\n  );\n};\n\nexport default RegisterScreen;\n","// Components\nimport { Link } from \"react-router-dom\";\nimport { Title } from \"unauthenticated-app\";\nimport { Button, Form, Input } from \"antd\";\n\n// Hooks\nimport useAuth from \"hooks/useAuth\";\nimport useAsync from \"hooks/useAsync\";\nimport { useHistory } from \"react-router\";\n\nconst LoginScreen = () => {\n  const history = useHistory();\n  const { login } = useAuth();\n  const { run, isPending } = useAsync();\n\n  const handleSubmit = (values: { username: string; password: string }) => {\n    run(login(values)).then(() => history.replace(\"/\"));\n  };\n\n  return (\n    <div>\n      <Title>请登录</Title>\n      <Form onFinish={handleSubmit}>\n        <Form.Item\n          name=\"username\"\n          hasFeedback\n          rules={[{ required: true, message: \"请输入用户名\" }]}\n        >\n          <Input placeholder=\"用户名\" type=\"text\" />\n        </Form.Item>\n        <Form.Item\n          name=\"password\"\n          hasFeedback\n          rules={[{ required: true, message: \"请输入密码\" }]}\n        >\n          <Input.Password placeholder=\"密码\" />\n        </Form.Item>\n        <Form.Item>\n          <Button\n            loading={isPending}\n            htmlType=\"submit\"\n            type=\"primary\"\n            className=\"d-block w-100\"\n          >\n            登录\n          </Button>\n        </Form.Item>\n      </Form>\n      <Link to=\"/register\" replace>\n        没有账号？注册新账号\n      </Link>\n    </div>\n  );\n};\n\nexport default LoginScreen;\n","export default __webpack_public_path__ + \"static/media/logo.6c866125.svg\";","export default __webpack_public_path__ + \"static/media/left.e74de3ec.svg\";","export default __webpack_public_path__ + \"static/media/right.b423a6cf.svg\";","// Components\nimport { Redirect, Route, Switch } from \"react-router\";\nimport { Card } from \"antd\";\nimport RegisterScreen from \"pages/auth/register\";\nimport LoginScreen from \"pages/auth/login\";\nimport styled from \"@emotion/styled\";\n\n// Resources\nimport logo from \"assets/logo.svg\";\nimport left from \"assets/left.svg\";\nimport right from \"assets/right.svg\";\n\nconst UnauthenticatedApp = () => {\n  return (\n    <Container>\n      <Background />\n      <Header />\n      <AuthenticatedCard>\n        <Switch>\n          <Route path=\"/login\" component={LoginScreen} />\n          <Route path=\"/register\" component={RegisterScreen} />\n          <Redirect to=\"/login\" from=\"/\" />\n        </Switch>\n      </AuthenticatedCard>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  min-height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst AuthenticatedCard = styled(Card)`\n  width: 40rem;\n  min-height: 56rem;\n  padding: 3.2rem 4rem;\n  border-radius: 0.3rem;\n  box-sizing: border-box;\n  box-shadow: rgba(0, 0, 0, 0.1) 0 0 10px;\n  text-align: center;\n`;\n\nconst Header = styled.header`\n  background: url(${logo}) no-repeat center;\n  padding: 5rem 0;\n  background-size: 8rem;\n  width: 100%;\n`;\n\nconst Background = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n  background-position: left bottom, right bottom;\n  background-size: calc(((100vw - 40rem) / 2) - 3.2rem),\n    calc(((100vw - 40rem) / 2) - 3.2rem), cover;\n  background-image: url(${left}), url(${right});\n`;\n\nexport const Title = styled.h2`\n  margin-bottom: 2.4rem;\n  color: rgb(94.108.132);\n`;\n\nexport default UnauthenticatedApp;\n","import styled from \"@emotion/styled\";\n\nexport const Header = styled.header`\n  display: flex;\n  height: 6rem;\n  padding: 0 2rem;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);\n  border-bottom: 1px solid #f7f7f7;\n  z-index: 1;\n`;\n\nexport const FlexColumnMain = styled.main`\n  display: flex;\n  flex-direction: column;\n  min-height: calc(100vh - 6rem);\n`;\n\nexport const FlexRowMain = styled.main`\n  display: flex;\n  flex-direction: row;\n  min-height: calc(100vh - 6rem);\n`;\n\nexport const ContentContainer = styled.div`\n  flex: 1;\n  padding: 1.5rem 2rem;\n  background-color: #f0f2f5;\n  width: calc(100vw - 200px);\n`;\n\nexport const Content = styled.div`\n  display: flex;\n  background-color: #fff;\n  border-radius: 2px;\n  width: 100%;\n  height: 100%;\n  padding: 1.5rem 2rem;\n`;\n","import { useHistory, useLocation } from \"react-router-dom\";\nimport { useCallback, useMemo, useRef } from \"react\";\nimport * as qs from \"qs\";\n\nconst useUrlQueryParam = <K extends string>(keys: K[]) => {\n  const history = useHistory();\n  const { search: searchString, pathname } = useLocation();\n  const searchParams = useMemo(\n    () => new URLSearchParams(searchString),\n    [searchString]\n  );\n  const paramKeys = useRef(keys);\n\n  const setSearchParams = useCallback(\n    (queryParam: { [key: string]: unknown }) => {\n      history.push({\n        pathname,\n        search: \"?\" + qs.stringify(queryParam),\n      });\n    },\n    [history, pathname]\n  );\n\n  return [\n    useMemo(\n      () =>\n        paramKeys.current.reduce((prev, key) => {\n          return { ...prev, [key]: searchParams.get(key) || undefined };\n        }, {} as { [key in K]: string | undefined }),\n      [searchParams, paramKeys]\n    ),\n    setSearchParams,\n  ] as const;\n};\n\nexport default useUrlQueryParam;\n","import { useState, useEffect } from \"react\";\n\nconst useDebounce = <V>(value: V, delay?: number) => {\n  const [debounceValue, setDebounceValue] = useState(value);\n\n  useEffect(() => {\n    let timer: number | null = setTimeout(() => {\n      setDebounceValue(value);\n      timer = null;\n    }, delay);\n\n    // 返回一个用于清除副作用的函数，React 会在执行当前 effect 之前对上一个 effect 进行清除\n    return () => {\n      if (timer) clearTimeout(timer);\n    };\n  }, [value, delay]);\n\n  return debounceValue;\n};\n\nexport default useDebounce;\n","import useAuth from \"./useAuth\";\nimport { http } from \"utils/http\";\n\nconst useHttp = () => {\n  const { user } = useAuth();\n  return (...[endpoint, config]: Parameters<typeof http>) =>\n    http(endpoint, { ...config, token: user?.token });\n};\n\nexport default useHttp;\n","// 此 Hook 用于生产 React Query useMutation 的 乐观更新 Option\nimport { QueryKey, useQueryClient } from \"react-query\";\nimport { notification } from \"antd\";\n\ninterface OptimisticOptionProps {\n  queryKey: QueryKey;\n  callback: (target: any, old?: any[]) => any[];\n}\n\nconst useOptimisticOption = ({ queryKey, callback }: OptimisticOptionProps) => {\n  const queryClient = useQueryClient();\n  return {\n    onMutate: async (target: any) => {\n      await queryClient.cancelQueries(queryKey);\n      // 保存前一次状态的快照\n      const previousItems = queryClient.getQueryData(queryKey);\n      // 乐观更新修改数据\n      queryClient.setQueryData(queryKey, (old?: any[]) =>\n        callback(target, old)\n      );\n      // 返回前一次状态的快照，以便发生错误时需要回滚所使用\n      return { previousItems };\n    },\n    // 出错时，使用前一次状态的快照重新设置当前缓存数据\n    onError: (error: any, newItem: any, context: any) => {\n      queryClient.setQueryData(queryKey, context.previousItems);\n      notification.error({\n        message: \"数据更新时出现异常\",\n        description:\n          \"数据请求中出现了异常，数据已自动回退至异常前的版本，请核查数据。\",\n      });\n    },\n  };\n};\n\nexport default useOptimisticOption;\n","import useHttp from \"./useHttp\";\nimport { QueryKey, useMutation, useQuery, useQueryClient } from \"react-query\";\nimport useOptimisticOption from \"./useOptimisticOption\";\n\ninterface CURDProps {\n  queryKey: QueryKey;\n  finalPoint: string;\n}\n\nconst useCURD = <T>({ queryKey, finalPoint }: CURDProps) => {\n  const client = useHttp();\n  const queryClient = useQueryClient();\n\n  const useGetItem = (param?: Partial<T>) =>\n    useQuery<T[]>(queryKey, () =>\n      client(finalPoint, { method: \"GET\", data: param })\n    );\n\n  const useGetItemById = <I>(\n    queryKey: QueryKey,\n    id?: number,\n    params?: Partial<I>\n  ) =>\n    useQuery<I>(\n      queryKey,\n      () => client(finalPoint + \"/\" + id, { method: \"GET\", data: params }),\n      {\n        enabled: !!id,\n      }\n    );\n\n  const useAddItem = () => {\n    return useMutation(\n      (params: Partial<T>) =>\n        client(finalPoint, {\n          method: \"POST\",\n          data: params,\n        }),\n      {\n        onSuccess: () => queryClient.invalidateQueries(queryKey),\n      }\n    );\n  };\n\n  const useEditItem = () => {\n    const options = useOptimisticOption({\n      queryKey,\n      callback: (target, old) =>\n        old?.map((item) =>\n          item.id === target.id ? { ...item, ...target } : item\n        ) || [],\n    });\n\n    return useMutation(\n      (params: { id: number } & Partial<T>) =>\n        client(finalPoint + \"/\" + params.id, {\n          method: \"PATCH\",\n          data: params,\n        }),\n      options\n    );\n  };\n\n  const useDeleteItem = () => {\n    const options = useOptimisticOption({\n      queryKey,\n      callback: (target, old) =>\n        old?.filter((item) => item.id !== target) || [],\n    });\n\n    return useMutation(\n      (id: number) =>\n        client(finalPoint + \"/\" + id, {\n          method: \"DELETE\",\n        }),\n      options\n    );\n  };\n\n  return {\n    useGetItem,\n    useGetItemById,\n    useAddItem,\n    useEditItem,\n    useDeleteItem,\n  };\n};\n\nexport default useCURD;\n","export const isFalsy = (value: unknown): boolean =>\n  value === 0 ? false : !value;\n\nexport const cleanObject = (object: { [key: string]: unknown }) => {\n  const result = { ...object };\n  Object.keys(result).forEach((key) => {\n    const value = result[key];\n    if (!value) {\n      delete result[key];\n    }\n  });\n  return result;\n};\n\nexport const selectValueToNumber = (value: unknown) =>\n  isNaN(Number(value)) ? undefined : Number(value);\n","import { useEffect, useMemo, useState } from \"react\";\nimport useUrlQueryParams from \"hooks/useUrlQueryParam\";\nimport useDebounce from \"hooks/useDebounce\";\nimport useCURD from \"hooks/useCURD\";\n\nimport { cleanObject } from \"utils\";\n\nimport { Project } from \"types/project\";\n\nexport interface ProjectQueryParamProps {\n  name: string | undefined;\n  personId: number | undefined;\n}\n\n// 获取项目列表页面的查询参数\nexport const useProjectParam = () => {\n  // 获取到 personId 和 name 的对象\n  const [urlQueryParam, setUrlQueryParam] = useUrlQueryParams([\n    \"personId\",\n    \"name\",\n  ]);\n  // 将获取到的参数对象中的 personId 转换成为数字\n  // 如果 personId 的值不是数字，则会被转换成0，然后被 cleanObject 清除\n  const [param, setParam] = useState<ProjectQueryParamProps>({\n    ...urlQueryParam,\n    personId: Number(urlQueryParam.personId) || undefined,\n  });\n  // 防抖\n  const debounceParam = useDebounce(param, 200);\n  // cleanObject\n  const cleanedParam = useMemo(\n    () => cleanObject(debounceParam as Partial<ProjectQueryParamProps>),\n    [debounceParam]\n  );\n  // 将计算的 param 推入 history\n  useEffect(() => {\n    setUrlQueryParam(cleanedParam);\n  }, [setUrlQueryParam, cleanedParam]);\n  return [param, cleanedParam, setParam] as const;\n};\n\n// 获取项目列表页面的 QueryKey\nexport const useProjectQueryKey = () => {\n  // param[0]: param\n  // param[1]: cleanedParam\n  // param[2]: setParam\n  const param = useProjectParam();\n  const cleanedParam = param[1];\n  return [\"projectList\", cleanedParam];\n};\n\nexport const useProjectCURD = () => {\n  const queryKey = useProjectQueryKey();\n  return useCURD<Project>({ queryKey, finalPoint: \"/projects\" });\n};\n","// Components\nimport { Link } from \"react-router-dom\";\nimport { Collapse, List, Popover } from \"antd\";\nimport styled from \"@emotion/styled\";\n\n// Hooks\nimport { useProjectCURD } from \"page-hooks/project\";\n\nconst ProjectPopover = () => {\n  const { useGetItem: useGetProject } = useProjectCURD();\n  const { data: projects } = useGetProject();\n  const pinnedProjects = projects?.filter((project) => project.pin) || [];\n  const hasPinnedProjects = Boolean(pinnedProjects && pinnedProjects.length);\n\n  const content = (\n    <ContentContainer>\n      <Collapse ghost defaultActiveKey=\"shortcuts\">\n        <Collapse.Panel\n          header=\"收藏的项目\"\n          key=\"pinProjects\"\n          collapsible={hasPinnedProjects ? \"header\" : \"disabled\"}\n        >\n          <List size=\"small\">\n            {pinnedProjects.map((project) => (\n              <List.Item key={project.id}>\n                <PinProjectListItem to={`/projects/${project.id}`}>\n                  {project.name}\n                </PinProjectListItem>\n              </List.Item>\n            ))}\n          </List>\n        </Collapse.Panel>\n        <Collapse.Panel header=\"快捷操作\" key=\"shortcuts\">\n          <Link className=\"shortcuts-link\" to=\"/projects/create-project\">\n            新建项目\n          </Link>\n        </Collapse.Panel>\n      </Collapse>\n    </ContentContainer>\n  );\n\n  return (\n    <Popover placement=\"bottom\" content={content}>\n      项目\n    </Popover>\n  );\n};\n\nconst ContentContainer = styled.div`\n  min-width: 20rem;\n\n  .ant-collapse .ant-collapse-item:not(:last-child) {\n    margin-bottom: 1rem !important;\n  }\n\n  .ant-collapse-header {\n    padding: 0 !important;\n    color: #777 !important;\n  }\n\n  .ant-collapse-content-box {\n    padding: 10px 0 !important;\n  }\n\n  .ant-divider-inner-text {\n    color: #777 !important;\n  }\n\n  .shortcuts-link {\n    padding: 0 16px;\n  }\n`;\n\nconst PinProjectListItem = styled(Link)`\n  color: rgba(0, 0, 0, 0.85);\n`;\n\nexport default ProjectPopover;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n  x1: \"97.6553341%\",\n  y1: \"35.6591143%\",\n  x2: \"37.202032%\",\n  y2: \"75.4891864%\",\n  id: \"uid392-1\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#0052CC\",\n  offset: \"7%\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#2684FF\",\n  offset: \"100%\"\n})), /*#__PURE__*/React.createElement(\"linearGradient\", {\n  x1: \"8.43371138%\",\n  y1: \"60.1495759%\",\n  x2: \"64.1161517%\",\n  y2: \"23.5790285%\",\n  id: \"uid392-2\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#0052CC\",\n  offset: \"0%\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"#2684FF\",\n  offset: \"100%\"\n})));\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", {\n  stroke: \"none\",\n  strokeWidth: 1,\n  fillRule: \"nonzero\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.3881081,27.9242105 C12.4881804,26.8071817 13.1062496,25.2917664 13.1062496,23.7115789 C13.1062496,22.1313915 12.4881804,20.6159762 11.3881081,19.4989474 L11.3881081,19.4989474 L3.74837838,11.7621053 L0.273513514,15.2926316 C-0.0900771727,15.6625064 -0.0900771727,16.2617042 0.273513514,16.6315789 L11.3881081,27.9242105 L11.3881081,27.9242105 Z\",\n  fill: \"currentColor\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M22.5027027,15.2926316 L11.3881081,4 L11.3881081,4 L11.3539189,4.03473684 L11.3539189,4.03473684 C9.08852466,6.36456187 9.09963243,10.1156459 11.3787838,12.4315789 L19.0247297,20.1652632 L22.5027027,16.6315789 C22.8662934,16.2617042 22.8662934,15.6625064 22.5027027,15.2926316 Z\",\n  fill: \"currentColor\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M11.3881081,12.4252632 C9.10895676,10.1093301 9.09784899,6.35824608 11.3632432,4.02842105 L3.43445946,12.0810526 L7.58067568,16.2936842 L11.3881081,12.4252632 Z\",\n  fill: \"url(#uid392-1)\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.1893243,15.6368421 L11.3881081,19.4989474 C12.4881804,20.6159762 13.1062496,22.1313915 13.1062496,23.7115789 C13.1062496,25.2917664 12.4881804,26.8071817 11.3881081,27.9242105 L19.3355405,19.8494737 L15.1893243,15.6368421 Z\",\n  fill: \"url(#uid392-2)\",\n  fillRule: \"nonzero\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M36.07,18.956 C36.07,20.646 35.394,21.842 33.418,21.842 C32.56,21.842 31.702,21.686 31,21.4 L31,23.662 C31.65,23.896 32.586,24.104 33.808,24.104 C37.032,24.104 38.41,21.946 38.41,18.8 L38.41,6.918 L36.07,6.918 L36.07,18.956 Z M41.894,7.568 C41.894,8.556 42.544,9.128 43.454,9.128 C44.364,9.128 45.014,8.556 45.014,7.568 C45.014,6.58 44.364,6.008 43.454,6.008 C42.544,6.008 41.894,6.58 41.894,7.568 Z M42.31,24 L44.546,24 L44.546,11 L42.31,11 L42.31,24 Z M47.926,24 L50.11,24 L50.11,16.33 C50.11,13.574 51.852,12.716 54.712,13.002 L54.712,10.818 C52.164,10.662 50.864,11.754 50.11,13.288 L50.11,11 L47.926,11 L47.926,24 Z M65.45,24 L65.45,21.66 C64.618,23.376 63.058,24.26 61.056,24.26 C57.598,24.26 55.856,21.322 55.856,17.5 C55.856,13.834 57.676,10.74 61.316,10.74 C63.214,10.74 64.67,11.598 65.45,13.288 L65.45,11 L67.686,11 L67.686,24 L65.45,24 Z M58.092,17.5 C58.092,20.62 59.34,22.18 61.654,22.18 C63.656,22.18 65.45,20.906 65.45,18.02 L65.45,16.98 C65.45,14.094 63.812,12.82 61.914,12.82 C59.392,12.82 58.092,14.484 58.092,17.5 Z M86.926,19.294 C86.926,16.226 84.898,15.056 81.284,14.146 C78.268,13.392 77.176,12.69 77.176,11.286 C77.176,9.726 78.502,8.946 80.738,8.946 C82.506,8.946 84.352,9.258 86.068,10.246 L86.068,7.906 C84.898,7.256 83.312,6.658 80.842,6.658 C76.864,6.658 74.836,8.634 74.836,11.286 C74.836,14.094 76.552,15.42 80.4,16.356 C83.65,17.136 84.586,17.942 84.586,19.45 C84.586,20.958 83.624,21.972 81.05,21.972 C78.788,21.972 76.344,21.374 74.758,20.542 L74.758,22.934 C76.084,23.61 77.618,24.26 80.92,24.26 C85.158,24.26 86.926,22.258 86.926,19.294 Z M95.09,24.26 C91.19,24.26 88.902,21.374 88.902,17.474 C88.902,13.574 91.19,10.74 95.09,10.74 C98.964,10.74 101.226,13.574 101.226,17.474 C101.226,21.374 98.964,24.26 95.09,24.26 Z M95.09,12.82 C92.308,12.82 91.086,15.004 91.086,17.474 C91.086,19.944 92.308,22.18 95.09,22.18 C97.846,22.18 99.042,19.944 99.042,17.474 C99.042,15.004 97.846,12.82 95.09,12.82 Z M106.92,9.622 C106.92,8.452 107.596,7.646 108.974,7.646 C109.494,7.646 109.988,7.698 110.378,7.776 L110.378,5.722 C109.988,5.618 109.546,5.514 108.87,5.514 C106.088,5.514 104.736,7.152 104.736,9.57 L104.736,11 L102.63,11 L102.63,13.08 L104.736,13.08 L104.736,24 L106.92,24 L106.92,13.08 L110.274,13.08 L110.274,11 L106.92,11 L106.92,9.622 Z M115.786,19.892 L115.786,13.08 L119.244,13.08 L119.244,11 L115.786,11 L115.786,8.244 L113.602,8.244 L113.602,11 L111.496,11 L111.496,13.08 L113.602,13.08 L113.602,19.944 C113.602,22.362 114.954,24 117.736,24 C118.412,24 118.854,23.896 119.244,23.792 L119.244,21.634 C118.854,21.712 118.36,21.816 117.84,21.816 C116.462,21.816 115.786,21.036 115.786,19.892 Z M125.432,24 L128.292,24 L130.528,17.708 L131.724,13.704 L132.92,17.708 L135.156,24 L138.016,24 L142.8,11 L140.33,11 L136.586,22.024 L132.79,11 L130.658,11 L126.862,22.024 L123.118,11 L120.648,11 L125.432,24 Z M153.538,24 L153.538,21.66 C152.706,23.376 151.146,24.26 149.144,24.26 C145.686,24.26 143.944,21.322 143.944,17.5 C143.944,13.834 145.764,10.74 149.404,10.74 C151.302,10.74 152.758,11.598 153.538,13.288 L153.538,11 L155.774,11 L155.774,24 L153.538,24 Z M146.18,17.5 C146.18,20.62 147.428,22.18 149.742,22.18 C151.744,22.18 153.538,20.906 153.538,18.02 L153.538,16.98 C153.538,14.094 151.9,12.82 150.002,12.82 C147.48,12.82 146.18,14.484 146.18,17.5 Z M159.154,24 L161.338,24 L161.338,16.33 C161.338,13.574 163.08,12.716 165.94,13.002 L165.94,10.818 C163.392,10.662 162.092,11.754 161.338,13.288 L161.338,11 L159.154,11 L159.154,24 Z M178.108,23.48 C177.042,24.052 175.404,24.26 174.078,24.26 C169.216,24.26 167.084,21.452 167.084,17.474 C167.084,13.548 169.268,10.74 173.22,10.74 C177.224,10.74 178.836,13.522 178.836,17.474 L178.836,18.488 L169.346,18.488 C169.658,20.698 171.088,22.128 174.156,22.128 C175.664,22.128 176.938,21.842 178.108,21.426 L178.108,23.48 Z M173.116,12.768 C170.75,12.768 169.554,14.302 169.32,16.564 L176.574,16.564 C176.444,14.146 175.352,12.768 173.116,12.768 Z\",\n  fill: \"inherit\",\n  fillRule: \"evenodd\"\n}));\n\nfunction SvgSoftwareLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 179 32\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    focusable: \"false\",\n    \"aria-hidden\": \"true\",\n    className: \"css-sq9aeg-Logo\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSoftwareLogo);\nexport default __webpack_public_path__ + \"static/media/software-logo.ec204298.svg\";\nexport { ForwardRef as ReactComponent };","// Components\nimport { Header } from \"styled-components/ContentScreenLayout\";\nimport { Button, Dropdown, Menu, message } from \"antd\";\nimport ProjectPopover from \"pages/project-list/project-popover\";\nimport styled from \"@emotion/styled\";\n// Hooks\nimport useAuth from \"hooks/useAuth\";\n// Resource\nimport { ReactComponent as SoftwareLogo } from \"assets/software-logo.svg\";\n\nconst HeaderLeft = styled.div`\n  display: flex;\n  align-items: center;\n\n  > * {\n    margin-bottom: 0;\n  }\n\n  > :not(:last-child) {\n    margin-right: 2rem;\n  }\n`;\n\nconst AuthenticatedAppHeader = () => {\n  const { user, logout: _logout } = useAuth();\n\n  const logout = () => {\n    _logout();\n    message.info(\"您已登出\");\n  };\n\n  const menu = (\n    <Menu>\n      <Menu.Item key=\"logoutButton\">\n        <Button type=\"link\" onClick={logout}>\n          登出\n        </Button>\n      </Menu.Item>\n    </Menu>\n  );\n\n  return (\n    <Header>\n      <HeaderLeft>\n        <Button\n          type=\"link\"\n          style={{ padding: 0 }}\n          onClick={() => (window.location.href = window.location.origin)}\n        >\n          <SoftwareLogo width=\"18rem\" color=\"rbg(38, 132, 255)\" />\n        </Button>\n        <h3>\n          <ProjectPopover />\n        </h3>\n      </HeaderLeft>\n      <Dropdown overlay={menu}>\n        <Button type=\"link\" onClick={(e) => e.preventDefault()}>\n          你好，{user?.name || \"用户\"}\n        </Button>\n      </Dropdown>\n    </Header>\n  );\n};\n\nexport default AuthenticatedAppHeader;\n","import styled from \"@emotion/styled\";\n\nexport const FlexColumn = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const FlexBetween = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n","import { useQuery } from \"react-query\";\nimport useHttp from \"hooks/useHttp\";\nimport { User } from \"types/user\";\n\nexport const useGetProjectUsers = () => {\n  const client = useHttp();\n  return useQuery<User[]>(\"projectUsers\", () =>\n    client(\"/users\", { method: \"GET\" })\n  );\n};\n","import { Select } from \"antd\";\nimport { ComponentProps } from \"react\";\nimport { useGetProjectUsers } from \"../page-hooks/projectUsers\";\n\nconst ProjectUserSelect = (props: ComponentProps<typeof Select>) => {\n  const { data: users } = useGetProjectUsers();\n  return (\n    <Select placeholder=\"负责人\" allowClear {...props}>\n      {users &&\n        users.map((user) => (\n          <Select.Option value={user.id} key={user.name}>\n            {user.name}\n          </Select.Option>\n        ))}\n    </Select>\n  );\n};\n\nexport default ProjectUserSelect;\n","import { Form, Input } from \"antd\";\nimport ProjectUserSelect from \"components/projectUserSelect\";\nimport { User } from \"types/user\";\nimport { ProjectQueryParamProps } from \"page-hooks/project\";\nimport { selectValueToNumber } from \"utils\";\n\ninterface SearchFormProps {\n  param: ProjectQueryParamProps;\n  setParam: (param: SearchFormProps[\"param\"]) => void;\n  users: User[];\n}\n\nconst SearchForm = ({ param, setParam }: SearchFormProps) => {\n  return (\n    <Form layout=\"inline\" style={{ marginBottom: \"2rem\" }}>\n      <Form.Item>\n        <Input\n          allowClear\n          type=\"text\"\n          value={param.name}\n          placeholder=\"项目名\"\n          onChange={(e) => setParam({ ...param, name: e.target.value })}\n        />\n      </Form.Item>\n      <Form.Item>\n        <ProjectUserSelect\n          onChange={(value) => {\n            setParam({ ...param, personId: selectValueToNumber(value) });\n          }}\n        />\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default SearchForm;\n","import { ComponentProps } from \"react\";\nimport { Rate } from \"antd\";\n\ninterface PinProps extends ComponentProps<typeof Rate> {\n  active: boolean;\n  changeActive?: (active: boolean) => void;\n}\n\nconst Pin = ({ active, changeActive, ...restProps }: PinProps) => {\n  return (\n    <Rate\n      count={1}\n      value={active ? 1 : 0}\n      onChange={(num) => changeActive?.(!!num)}\n      {...restProps}\n    />\n  );\n};\n\nexport default Pin;\n","import { Modal, ModalFuncProps } from \"antd\";\nimport { ExclamationCircleOutlined } from \"@ant-design/icons\";\n\ntype DeleteConfirmProps = (\n  name: string,\n  onOk: ModalFuncProps[\"onOk\"],\n  onCancel: ModalFuncProps[\"onCancel\"]\n) => void;\n\nconst createDeleteConfirm = (props: ModalFuncProps): void => {\n  const { confirm } = Modal;\n\n  confirm({\n    icon: <ExclamationCircleOutlined />,\n    okText: \"确认\",\n    okType: \"danger\",\n    cancelText: \"取消\",\n    ...props,\n  });\n};\n\nexport const deleteTaskConfirm: DeleteConfirmProps = (name, onOk, onCancel) => {\n  const confirmProps: ModalFuncProps = {\n    title: (\n      <p>\n        确定删除任务 <span className=\"color-danger\">{name}</span> 吗？\n      </p>\n    ),\n    content: \"确认后任务将被删除，此操作不可恢复\",\n    onOk,\n    onCancel,\n    afterClose: onCancel,\n  };\n\n  createDeleteConfirm(confirmProps);\n};\n\nexport const deleteProjectConfirm: DeleteConfirmProps = (\n  name,\n  onOk,\n  onCancel\n) => {\n  const confirmProps: ModalFuncProps = {\n    title: (\n      <p>\n        确定删除项目 <span className=\"color-danger\">{name}</span> 吗？\n      </p>\n    ),\n    content: \"确认后项目将被删除，此操作不可恢复\",\n    onOk,\n    onCancel,\n    afterClose: onCancel,\n  };\n\n  createDeleteConfirm(confirmProps);\n};\n\nexport const deleteBoardConfirm: DeleteConfirmProps = (\n  name,\n  onOk,\n  onCancel\n) => {\n  const confirmProps: ModalFuncProps = {\n    title: (\n      <p>\n        确定删除看板 <span className=\"color-danger\">{name}</span>吗？{\" \"}\n      </p>\n    ),\n    content: \"确认后看板将被删除，此操作不可恢复\",\n    onOk,\n    onCancel,\n    afterClose: onCancel,\n  };\n\n  createDeleteConfirm(confirmProps);\n};\n\nexport const deleteTaskGroupConfirm: DeleteConfirmProps = (\n  name,\n  onOk,\n  onCancel\n) => {\n  const confirmProps: ModalFuncProps = {\n    title: (\n      <p>\n        确定删除任务组 <span className=\"color-danger\">{name}</span> 吗？{\" \"}\n      </p>\n    ),\n    content: \"确认后任务组将被删除，此操作不可恢复\",\n    onOk,\n    onCancel,\n    afterClose: onCancel,\n  };\n\n  createDeleteConfirm(confirmProps);\n};\n","// Components\nimport { Link } from \"react-router-dom\";\nimport { Button, Space, Table } from \"antd\";\nimport Pin from \"components/pin\";\n\n// Module\nimport dayjs from \"dayjs\";\n\n// Hooks\nimport { useHistory, useRouteMatch } from \"react-router\";\nimport { useProjectCURD } from \"page-hooks/project\";\n\n// Types\nimport { TableProps } from \"antd/es/table\";\nimport { User } from \"types/user\";\nimport { Project } from \"types/project\";\n\n// Utils\nimport { deleteProjectConfirm } from \"utils/createDeleteConfirm\";\n\ninterface ListProps extends TableProps<Project> {\n  users: User[];\n  tableLoading: boolean;\n}\n\nconst List = ({ users, ...props }: ListProps) => {\n  const history = useHistory();\n  const { url } = useRouteMatch();\n  const { useEditItem: useEditProject, useDeleteItem: useDeleteProject } =\n    useProjectCURD();\n  const { mutate: editProject } = useEditProject();\n  const { mutateAsync: deleteProject } = useDeleteProject();\n\n  const switchPin = (id: number) => (pin: boolean) => editProject({ id, pin });\n\n  const deleteProjectButtonOnclick = (id: number, name: string) => {\n    history.push(`${url}/${id}/delete`);\n    deleteProjectConfirm(\n      name,\n      () => deleteProject(id),\n      () => history.replace(\"/projects\")\n    );\n  };\n\n  const columns = [\n    {\n      title: <Pin active={true} disabled={true} />,\n      render(_: Project, project: Project) {\n        return (\n          <Pin active={project.pin} changeActive={switchPin(project.id)} />\n        );\n      },\n    },\n    {\n      title: \"项目名称\",\n      render(_: Project, project: Project) {\n        return (\n          <Link to={`${url}/${project.id.toString()}`}>{project.name}</Link>\n        );\n      },\n      sorter: (a: Project, b: Project) => a.name.localeCompare(b.name),\n    },\n    {\n      title: \"部门\",\n      dataIndex: \"organization\",\n    },\n    {\n      title: \"负责人\",\n      render(_: Project, project: Project) {\n        return (\n          users.find((user) => user.id === project.personId)?.name || \"未知\"\n        );\n      },\n    },\n    {\n      title: \"创建时间\",\n      render(_: Project, project: Project) {\n        return project.created\n          ? dayjs(project.created).format(\"YYYY-MM-DD H:M:s\")\n          : \"无\";\n      },\n    },\n    {\n      title: \"操作\",\n      render(_: Project, project: Project) {\n        return (\n          <Space size=\"small\">\n            <Link to={`/projects/${project.id}/edit`}>编辑</Link>\n            <Button\n              danger\n              type=\"link\"\n              onClick={() =>\n                deleteProjectButtonOnclick(project.id, project.name)\n              }\n            >\n              删除\n            </Button>\n          </Space>\n        );\n      },\n    },\n  ];\n\n  return (\n    <Table\n      rowKey={\"id\"}\n      pagination={false}\n      columns={columns}\n      loading={{ delay: 200, spinning: props.tableLoading }}\n      {...props}\n    />\n  );\n};\n\nexport default List;\n","import { useEffect, useRef } from \"react\";\n\nconst useDocumentTitle = (title: string) => {\n  const oldTitle = useRef(document.title).current;\n  useEffect(() => {\n    document.title = `${title} · Jira任务管理系统`;\n  }, [title]);\n  useEffect(() => {\n    return () => {\n      document.title = oldTitle;\n    };\n  }, [oldTitle]);\n};\n\nexport default useDocumentTitle;\n","import { Rule } from \"antd/es/form\";\n\nconst validateRules: { [key: string]: Rule } = {\n  name: {\n    required: true,\n    message: \"必须填写项目名称\",\n  },\n  organization: {\n    required: true,\n    message: \"必须指定负责部门\",\n  },\n  personId: {\n    required: true,\n    message: \"必须指定负责人\",\n  },\n};\n\nexport default validateRules;\n","// Components\nimport { Form, Input } from \"antd\";\nimport ProjectUserSelect from \"components/projectUserSelect\";\n\n// Hooks\nimport { useProjectCURD } from \"page-hooks/project\";\nimport useDocumentTitle from \"hooks/useDocumentTitle\";\n\n// Types\nimport ModalFormProps from \"types/modalFormProps\";\n\n// Form validate\nimport validateRules from \"./validateRules\";\n\nconst CreateProjectForm = ({\n  form: formInstance,\n  setConfirmLoading,\n  closeModal,\n}: ModalFormProps) => {\n  useDocumentTitle(\"新建项目\");\n\n  const { useAddItem: useAddProject } = useProjectCURD();\n  const { mutateAsync } = useAddProject();\n\n  const onFinish = (values: any) => {\n    mutateAsync(values).then(() => {\n      formInstance.resetFields();\n      closeModal();\n    });\n  };\n\n  // 表单验证错误时取消 modal button loading\n  const onFinishFailed = () => {\n    setConfirmLoading(false);\n  };\n\n  return (\n    <Form\n      form={formInstance}\n      name=\"createProject\"\n      labelCol={{ span: 4 }}\n      onFinish={onFinish}\n      onFinishFailed={onFinishFailed}\n      preserve={false}\n    >\n      <Form.Item label=\"项目名称\" name=\"name\" rules={[validateRules[\"name\"]]}>\n        <Input />\n      </Form.Item>\n      <Form.Item\n        label=\"负责部门\"\n        name=\"organization\"\n        rules={[validateRules[\"organization\"]]}\n      >\n        <Input />\n      </Form.Item>\n      <Form.Item\n        label=\"负责人\"\n        name=\"personId\"\n        rules={[validateRules[\"personId\"]]}\n      >\n        <ProjectUserSelect placeholder=\"请选择\" allowClear={false} />\n      </Form.Item>\n    </Form>\n  );\n};\n\nexport default CreateProjectForm;\n","import { useRouteMatch } from \"react-router-dom\";\n\nexport const useProjectIdInParam = () => {\n  const { params } = useRouteMatch<{ projectId: string }>();\n  return Number(params.projectId) || undefined;\n};\n","// Components\nimport { Form, Input, Spin } from \"antd\";\nimport ProjectUserSelect from \"components/projectUserSelect\";\n\n// Hooks\nimport { useEffect } from \"react\";\nimport { useProjectCURD } from \"page-hooks/project\";\nimport { useProjectIdInParam } from \"page-hooks/useProjectIdInParam\";\nimport useDocumentTitle from \"hooks/useDocumentTitle\";\n\n// Types\nimport ModalFormProps from \"types/modalFormProps\";\nimport { Project } from \"types/project\";\n\n// Form validate\nimport validateRules from \"./validateRules\";\n\nconst EditProjectForm = ({\n  form: formInstance,\n  setConfirmLoading,\n  closeModal,\n}: ModalFormProps) => {\n  useDocumentTitle(\"编辑项目\");\n\n  const projectId = useProjectIdInParam();\n  const { useGetItemById: useGetSingleProject, useEditItem: useEditProject } =\n    useProjectCURD();\n  const { data: initialValues, isLoading } = useGetSingleProject<Project>(\n    [\"project\", { id: projectId }],\n    projectId\n  );\n  const { mutate: editProject } = useEditProject();\n\n  const onFinish = (values: any) => {\n    editProject({ id: projectId, ...values });\n    formInstance.resetFields();\n    closeModal();\n  };\n\n  // 表单验证错误时取消 modal button loading\n  const onFinishFailed = () => {\n    setConfirmLoading(false);\n  };\n\n  useEffect(() => {\n    formInstance.setFieldsValue(initialValues);\n  }, [formInstance, initialValues]);\n\n  // 加载项目详情数据时同步 modal button loading\n  useEffect(() => {\n    setConfirmLoading(isLoading);\n  }, [setConfirmLoading, isLoading]);\n\n  return (\n    <Spin spinning={isLoading} delay={200}>\n      <Form\n        form={formInstance}\n        name=\"editProject\"\n        labelCol={{ span: 4 }}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n        preserve={false}\n      >\n        <Form.Item label=\"项目名称\" name=\"name\" rules={[validateRules[\"name\"]]}>\n          <Input />\n        </Form.Item>\n        <Form.Item\n          label=\"负责部门\"\n          name=\"organization\"\n          rules={[validateRules[\"organization\"]]}\n        >\n          <Input />\n        </Form.Item>\n        <Form.Item\n          label=\"负责人\"\n          name=\"personId\"\n          rules={[validateRules[\"personId\"]]}\n        >\n          <ProjectUserSelect placeholder=\"请选择\" allowClear={false} />\n        </Form.Item>\n      </Form>\n    </Spin>\n  );\n};\n\nexport default EditProjectForm;\n","import { useMemo } from \"react\";\nimport { useHistory, useRouteMatch } from \"react-router\";\n\nconst useControlModal = (\n  startPoint: string,\n  path: { [key: string]: string }\n) => {\n  const { path: pathname } = useRouteMatch();\n  const history = useHistory();\n\n  const closeModal = () => {\n    history.push(startPoint);\n  };\n\n  const visible = useMemo(\n    () => Object.values(path).includes(pathname),\n    [path, pathname]\n  );\n  const action = useMemo(\n    () => Object.keys(path).find((k) => path[k] === pathname),\n    [path, pathname]\n  );\n\n  return {\n    visible,\n    action,\n    closeModal,\n  };\n};\n\nexport default useControlModal;\n","// Components\nimport { Form, Modal, ModalProps } from \"antd\";\nimport CreateProjectForm from \"./createProjectForm\";\nimport EditProjectForm from \"./editProjectForm\";\n\n// Hooks\nimport { useMemo, useState } from \"react\";\nimport useControlModal from \"hooks/useControlModal\";\n\nconst ProjectModal = () => {\n  const path = {\n    create: \"/projects/create-project\",\n    edit: \"/projects/:projectId/edit\",\n  };\n\n  const actionModalTitle: { [key: string]: string } = {\n    create: \"新建项目\",\n    edit: \"编辑项目\",\n  };\n\n  const [confirmLoading, setConfirmLoading] = useState(false);\n  const [modalForm] = Form.useForm();\n  const { visible, action, closeModal } = useControlModal(\"/projects\", path);\n\n  const onOk = () => {\n    modalForm.submit();\n    setConfirmLoading(true);\n  };\n\n  const modalProps: ModalProps = {\n    destroyOnClose: true,\n    visible,\n    onOk: onOk,\n    onCancel: closeModal,\n    confirmLoading,\n    okText: \"确定\",\n    cancelText: \"退出\",\n    title: actionModalTitle[action || \"create\"],\n    afterClose() {\n      setConfirmLoading(false);\n    },\n  };\n\n  const activeComponent = useMemo(() => {\n    const props = {\n      form: modalForm,\n      setConfirmLoading,\n      closeModal,\n    };\n\n    switch (action) {\n      case \"create\":\n        return <CreateProjectForm {...props} />;\n      case \"edit\":\n        return <EditProjectForm {...props} />;\n    }\n  }, [closeModal, modalForm, action]);\n\n  return <Modal {...modalProps}>{activeComponent}</Modal>;\n};\nexport default ProjectModal;\n","import { useQuery } from \"react-query\";\nimport useHttp from \"hooks/useHttp\";\nimport { TaskType } from \"types/taskType\";\n\nexport const useGetTaskTypes = () => {\n  const client = useHttp();\n  return useQuery<TaskType[]>([\"taskTypes\"], () =>\n    client(\"/taskTypes\", { method: \"GET\" })\n  );\n};\n","import { ComponentProps } from \"react\";\nimport { Select } from \"antd\";\nimport { useGetTaskTypes } from \"page-hooks/taskType\";\n\nconst TaskTypeSelect = (props: ComponentProps<typeof Select>) => {\n  const { data: taskTypes } = useGetTaskTypes();\n  return (\n    <Select placeholder=\"任务类型\" allowClear {...props}>\n      {taskTypes &&\n        taskTypes.map((taskType) => (\n          <Select.Option value={taskType.id} key={taskType.name}>\n            {taskType.name}\n          </Select.Option>\n        ))}\n    </Select>\n  );\n};\n\nexport default TaskTypeSelect;\n","// Components\nimport { Button, Input } from \"antd\";\nimport styled from \"@emotion/styled\";\nimport ProjectUserSelect from \"components/projectUserSelect\";\nimport TaskTypeSelect from \"components/TaskTypeSelect\";\n// Hooks\nimport { BoardParamProps } from \"page-hooks/boards\";\n// Utils\nimport { selectValueToNumber } from \"utils\";\n\ninterface SearchPanelProps {\n  taskParams: BoardParamProps;\n  setTaskQueryParams: (param: SearchPanelProps[\"taskParams\"]) => void;\n}\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-bottom: 2rem;\n\n  *:not(:last-child) {\n    margin-right: 1rem;\n  }\n`;\n\nconst SearchPanel = ({ taskParams, setTaskQueryParams }: SearchPanelProps) => {\n  const reset = () => {\n    setTaskQueryParams({\n      name: undefined,\n      typeId: undefined,\n      processorId: undefined,\n    });\n  };\n  return (\n    <Container>\n      <Input\n        style={{ width: \"20rem\" }}\n        placeholder=\"任务名\"\n        value={taskParams.name}\n        onChange={(e) =>\n          setTaskQueryParams({ ...taskParams, name: e.target.value })\n        }\n      />\n\n      <ProjectUserSelect\n        value={taskParams.processorId}\n        onChange={(value) =>\n          setTaskQueryParams({\n            ...taskParams,\n            processorId: selectValueToNumber(value),\n          })\n        }\n      />\n      <TaskTypeSelect\n        value={taskParams.typeId || undefined}\n        onChange={(value) =>\n          setTaskQueryParams({\n            ...taskParams,\n            typeId: selectValueToNumber(value),\n          })\n        }\n      />\n      <Button onClick={reset}>重置</Button>\n    </Container>\n  );\n};\n\nexport default SearchPanel;\n","import { Input as _Input } from \"antd\";\nimport styled from \"@emotion/styled\";\nimport { EnterOutlined } from \"@ant-design/icons\";\n\nimport { SearchProps } from \"antd/es/input\";\n\ninterface Props extends Omit<SearchProps, \"onSearch\" | \"loading\" | \"onSubmit\"> {\n  loading: SearchProps[\"loading\"];\n  onSubmit: SearchProps[\"onSearch\"];\n}\n\nconst SubmitInput = ({ loading, onSubmit, ...props }: Props) => (\n  <Input\n    loading={loading}\n    allowClear={!loading}\n    enterButton={loading ? <span /> : <EnterOutlined />}\n    onSearch={onSubmit}\n    {...props}\n  />\n);\n\nconst Input = styled(_Input.Search)`\n  .ant-input-search-button {\n    padding: 0 10px;\n  }\n`;\n\nexport default SubmitInput;\n","/**\n * 在list中，把from放在to的前边\n * @param list\n * @param from\n * @param to\n */\nconst insertBefore = (list: unknown[], from: number, to: number) => {\n  const toItem = list[to];\n  const removedItem = list.splice(from, 1)[0];\n  const toIndex = list.indexOf(toItem);\n  list.splice(toIndex, 0, removedItem);\n  return list;\n};\n\n/**\n * 在list中，把from放在to的后面\n * @param list\n * @param from\n * @param to\n */\nconst insertAfter = (list: unknown[], from: number, to: number) => {\n  const toItem = list[to];\n  const removedItem = list.splice(from, 1)[0];\n  const toIndex = list.indexOf(toItem);\n  list.splice(toIndex + 1, 0, removedItem);\n  return list;\n};\n\n/**\n * 在本地对排序进行乐观更新\n * @param fromId 要排序的项目的id\n * @param type 'before' | 'after'\n * @param referenceId 参照id\n * @param list 要排序的列表, 比如tasks, kanbans\n */\nconst reorder = ({\n  fromId,\n  type,\n  referenceId,\n  list,\n}: {\n  list: { id: number }[];\n  fromId: number;\n  type: \"after\" | \"before\";\n  referenceId: number;\n}) => {\n  const copiedList = [...list];\n  // 找到fromId对应项目的下标\n  const movingItemIndex = copiedList.findIndex((item) => item.id === fromId);\n  if (!referenceId) {\n    return insertAfter([...copiedList], movingItemIndex, copiedList.length - 1);\n  }\n  const targetIndex = copiedList.findIndex((item) => item.id === referenceId);\n  const insert = type === \"after\" ? insertAfter : insertBefore;\n  return insert([...copiedList], movingItemIndex, targetIndex);\n};\n\nexport default reorder;\n","import useCURD from \"hooks/useCURD\";\nimport useDebounce from \"hooks/useDebounce\";\nimport useUrlQueryParams from \"hooks/useUrlQueryParam\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useProjectIdInParam } from \"./useProjectIdInParam\";\nimport { cleanObject } from \"utils\";\nimport { BoardParamProps } from \"./boards\";\nimport { Task } from \"types/task\";\nimport useHttp from \"../hooks/useHttp\";\nimport { useMutation, useQueryClient } from \"react-query\";\nimport { DropSortProps } from \"../types/DropSortProps\";\nimport { notification } from \"antd\";\nimport reorder from \"../utils/dragReorder\";\n\nexport const useTaskParam = () => {\n  // 与 /page-hooks/project.ts 中的 useProjectParam 写法相同\n  const [urlQueryParam, setUrlQueryParam] = useUrlQueryParams([\n    \"name\",\n    \"typeId\",\n    \"processorId\",\n  ]);\n  const [param, setParam] = useState<BoardParamProps>({\n    ...urlQueryParam,\n    typeId: Number(urlQueryParam.typeId) || undefined,\n    processorId: Number(urlQueryParam.processorId) || undefined,\n  });\n  // 防抖\n  const debounceParam = useDebounce(param, 200);\n  // cleanObject\n  const cleanedParam = useMemo(\n    () => cleanObject(debounceParam as Partial<BoardParamProps>),\n    [debounceParam]\n  );\n  // 将计算的 param 推入 history\n  useEffect(() => {\n    setUrlQueryParam(cleanedParam);\n  }, [setUrlQueryParam, cleanedParam]);\n  return [param, cleanedParam, setParam] as const;\n};\n\nexport const useTaskCURD = (cleanedQueryParam?: Partial<Task>) => {\n  const projectId = useProjectIdInParam();\n  const queryKey = [\"tasks\", { projectId }, cleanedQueryParam || {}];\n  return useCURD<Task>({ queryKey, finalPoint: \"/tasks\" });\n};\n\nexport const useReorderTask = () => {\n  const client = useHttp();\n  const projectId = useProjectIdInParam();\n  const queryClient = useQueryClient();\n  const queryKey = [\"tasks\", { projectId }, {}];\n  return useMutation(\n    (params: DropSortProps) =>\n      client(\"/tasks/reorder\", {\n        data: params,\n        method: \"POST\",\n      }),\n    {\n      onMutate: async (target: any) => {\n        await queryClient.cancelQueries(queryKey);\n        // 保存前一次状态的快照\n        const previousItems = queryClient.getQueryData(queryKey);\n        // 乐观更新修改数据\n        queryClient.setQueryData(queryKey, (old?: any[]) => {\n          const orderedList = reorder({ list: old, ...target }) as Task[];\n          return orderedList.map((item) =>\n            item.id === target.fromId\n              ? { ...item, kanbanId: target.toKanbanId }\n              : item\n          );\n        });\n        // 返回前一次状态的快照，以便发生错误时需要回滚所使用\n        return { previousItems };\n      },\n      // 出错时，使用前一次状态的快照重新设置当前缓存数据\n      onError: (error: any, newItem: any, context: any) => {\n        queryClient.setQueryData(queryKey, context.previousItems);\n        notification.error({\n          message: \"数据更新时出现异常\",\n          description:\n            \"数据请求中出现了异常，数据已自动回退至异常前的版本，请核查数据。\",\n        });\n      },\n    }\n  );\n};\n","import { Link } from \"react-router-dom\";\nimport { Button } from \"antd\";\nimport { DeleteOutlined, EditOutlined } from \"@ant-design/icons\";\nimport styled from \"@emotion/styled\";\nimport { useHistory } from \"react-router\";\nimport { useTaskCURD } from \"page-hooks/task\";\nimport { useProjectIdInParam } from \"page-hooks/useProjectIdInParam\";\nimport { deleteTaskConfirm } from \"utils/createDeleteConfirm\";\nimport { Task } from \"types/task\";\n\nconst TaskActionContainer = styled.div`\n  *:not(:last-child) {\n    margin-right: 0.7rem;\n  }\n`;\n\nconst TaskAction = ({ task }: { task: Task }) => {\n  const history = useHistory();\n  const projectId = useProjectIdInParam();\n  const { useDeleteItem } = useTaskCURD();\n\n  const { mutate } = useDeleteItem();\n\n  const deleteButtonOnClick = () => {\n    const onOk = () => {\n      mutate(task.id);\n      onCancel();\n    };\n    const onCancel = () => history.replace(`/projects/${projectId}/boards`);\n\n    history.push(`/projects/${projectId}/task/${task.id}/delete`);\n    deleteTaskConfirm(task.name, onOk, onCancel);\n  };\n\n  return (\n    <TaskActionContainer>\n      <Link to={`/projects/${projectId}/task/${task.id}/edit`}>\n        <Button size=\"small\" icon={<EditOutlined />} />\n      </Link>\n      <Link to={`/projects/${projectId}/task/${task.id}/delete`}>\n        <Button\n          danger\n          size=\"small\"\n          icon={<DeleteOutlined />}\n          onClick={deleteButtonOnClick}\n        />\n      </Link>\n    </TaskActionContainer>\n  );\n};\n\nexport default TaskAction;\n","import { Card, Tag } from \"antd\";\nimport styled from \"@emotion/styled\";\nimport TaskAction from \"./TaskAction\";\nimport { useGetTaskTypes } from \"page-hooks/taskType\";\nimport { Task } from \"types/task\";\n\nconst TaskItem = ({ task }: { task: Task }) => (\n  <Card style={{ marginBottom: \"0.7rem\" }}>\n    <TaskInfo>\n      <p style={{ marginBottom: 0 }}>{task.name}</p>\n      <TaskTypeIcon id={task.typeId} />\n    </TaskInfo>\n    <TaskAction task={task} />\n  </Card>\n);\nexport default TaskItem;\n\nconst TaskInfo = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n`;\n\nconst TaskTypeIcon = ({ id }: { id: Task[\"id\"] }) => {\n  const { data: taskTypes } = useGetTaskTypes();\n  const name = taskTypes?.find((taskType) => taskType.id === id)?.name;\n  if (!name) return <Tag color=\"#FAAD14\">Unknown</Tag>;\n  return name === \"task\" ? (\n    <Tag color=\"#108ee9\">Task</Tag>\n  ) : (\n    <Tag color=\"#f50\">BUG</Tag>\n  );\n};\n","import useCURD from \"hooks/useCURD\";\nimport useHttp from \"hooks/useHttp\";\nimport { useProjectIdInParam } from \"./useProjectIdInParam\";\nimport { useMutation, useQueryClient } from \"react-query\";\nimport { Board } from \"types/boards\";\nimport { DropSortProps } from \"types/DropSortProps\";\nimport reorder from \"../utils/dragReorder\";\nimport { notification } from \"antd\";\n\nexport interface BoardParamProps {\n  name: string | undefined;\n  typeId: number | undefined;\n  processorId: number | undefined;\n}\n\nexport const useBoardQueryKey = () => {\n  const projectId = useProjectIdInParam();\n  return [\"boards\", { projectId }];\n};\n\nexport const useBoardCURD = () => {\n  const queryKey = useBoardQueryKey();\n  return useCURD<Board>({ queryKey, finalPoint: \"/kanbans\" });\n};\n\nexport const useReorderBoard = () => {\n  const client = useHttp();\n  const queryClient = useQueryClient();\n  const projectId = useProjectIdInParam();\n  const queryKey = [\"boards\", { projectId }];\n  return useMutation(\n    (params: DropSortProps) =>\n      client(\"/kanbans/reorder\", {\n        data: params,\n        method: \"POST\",\n      }),\n    {\n      onMutate: async (target: any) => {\n        await queryClient.cancelQueries(queryKey);\n        // 保存前一次状态的快照\n        const previousItems = queryClient.getQueryData(queryKey);\n        // 乐观更新修改数据\n        queryClient.setQueryData(queryKey, (old?: any[]) =>\n          reorder({ list: old, ...target })\n        );\n        // 返回前一次状态的快照，以便发生错误时需要回滚所使用\n        return { previousItems };\n      },\n      // 出错时，使用前一次状态的快照重新设置当前缓存数据\n      onError: (error: any, newItem: any, context: any) => {\n        queryClient.setQueryData(queryKey, context.previousItems);\n        notification.error({\n          message: \"数据更新时出现异常\",\n          description:\n            \"数据请求中出现了异常，数据已自动回退至异常前的版本，请核查数据。\",\n        });\n      },\n    }\n  );\n};\n","import { Button, Dropdown, List } from \"antd\";\nimport { Link } from \"react-router-dom\";\n\nimport { Board } from \"types/boards\";\nimport { useHistory, useRouteMatch } from \"react-router\";\nimport { useBoardCURD } from \"../../page-hooks/boards\";\nimport { deleteBoardConfirm } from \"utils/createDeleteConfirm\";\nimport { useProjectIdInParam } from \"../../page-hooks/useProjectIdInParam\";\n\nconst BoardAction = ({ board }: { board: Board }) => {\n  const history = useHistory();\n  const projectId = useProjectIdInParam();\n  const { url } = useRouteMatch();\n  const { useDeleteItem } = useBoardCURD();\n  const { mutate } = useDeleteItem();\n\n  const deleteButtonOnClick = () => {\n    history.push(`${url}/${board.id}/delete`);\n    const onOk = () => {\n      mutate(board.id);\n      onCancel();\n    };\n    const onCancel = () => history.replace(`${url}`);\n    deleteBoardConfirm(board.name, onOk, onCancel);\n  };\n\n  const actions = (\n    <List>\n      <List.Item>\n        <Link to={`/projects/${projectId}/board/${board.id}/edit`}>\n          <Button type=\"link\">编辑</Button>\n        </Link>\n      </List.Item>\n      <List.Item>\n        <Button type=\"link\" danger onClick={deleteButtonOnClick}>\n          删除\n        </Button>\n      </List.Item>\n    </List>\n  );\n\n  return (\n    <Dropdown overlay={actions}>\n      <span style={{ color: \"#1890ff\" }}>...</span>\n    </Dropdown>\n  );\n};\nexport default BoardAction;\n","import { useLocation } from \"react-router\";\n\nconst useHasQueryParams = () => {\n  const { search } = useLocation();\n  return !!search && search !== \"?\";\n};\n\nexport default useHasQueryParams;\n","import SubmitInput from \"./SubmitInput\";\nimport { Button } from \"antd\";\nimport { EnterOutlined, RollbackOutlined } from \"@ant-design/icons\";\n\nimport { cloneElement, useMemo, useState } from \"react\";\nimport { useTaskCURD } from \"page-hooks/task\";\nimport { useProjectIdInParam } from \"page-hooks/useProjectIdInParam\";\nimport useHasQueryParams from \"hooks/useHasQueryParams\";\n\nconst AddTask = ({ boardId }: { boardId: number }) => {\n  const [state, setState] = useState<\"button\" | \"input\">(\"button\");\n  const [inputValue, setInputValue] = useState(\"\");\n\n  const { useAddItem: useAddTask } = useTaskCURD();\n  const { mutateAsync: addTask, isLoading } = useAddTask();\n  const projectId = useProjectIdInParam();\n  const hasQueryParam = useHasQueryParams();\n\n  const enterButton = useMemo(() => {\n    if (isLoading) {\n      return <span />;\n    } else if (inputValue === \"\" || !inputValue) {\n      return <RollbackOutlined />;\n    } else {\n      return <EnterOutlined />;\n    }\n  }, [inputValue, isLoading]);\n\n  const onSubmit = (value: string) => {\n    // 在不输入内容时点击按钮则切换回按钮形态\n    if (value === \"\") {\n      setState(\"button\");\n    } else {\n      // 添加任务后清空 Input\n      addTask({ name: value, kanbanId: boardId, projectId }).then(() => {\n        setInputValue(\"\");\n      });\n    }\n  };\n\n  const addTaskButton = (\n    <Button\n      onClick={() => {\n        setState(\"input\");\n      }}\n    >\n      + 添加任务\n    </Button>\n  );\n\n  const addTaskInput = (\n    <SubmitInput\n      allowClear={!isLoading}\n      placeholder=\"请输入任务名称\"\n      loading={isLoading}\n      value={inputValue}\n      onChange={(e) => setInputValue(e.target.value)}\n      enterButton={enterButton}\n      onSubmit={onSubmit}\n    />\n  );\n\n  return cloneElement(state === \"button\" ? addTaskButton : addTaskInput, {\n    style: { display: hasQueryParam ? \"none\" : \"block\" },\n  });\n};\n\nexport default AddTask;\n","import {\n  cloneElement,\n  forwardRef,\n  HTMLAttributes,\n  isValidElement,\n  ReactNode,\n} from \"react\";\nimport {\n  Draggable,\n  DraggableProps,\n  Droppable,\n  DroppableProps,\n  DroppableProvided,\n  DroppableProvidedProps,\n} from \"react-beautiful-dnd\";\n\ntype DropProps = Omit<DroppableProps, \"children\"> & { children: ReactNode };\nexport const Drop = ({ children, ...props }: DropProps) => {\n  return (\n    <Droppable {...props}>\n      {(provided) => {\n        if (!isValidElement(children))\n          throw Error(\"Droppable 的 children 必须是一个 ReactNode\");\n        // 克隆 children 以附加上 Droppable 所需要的 props\n        return cloneElement(children, {\n          ...provided.droppableProps,\n          ref: provided.innerRef,\n          provided,\n        });\n      }}\n    </Droppable>\n  );\n};\n\ntype DropChildProps = Partial<\n  { provided: DroppableProvided } & DroppableProvidedProps\n> &\n  HTMLAttributes<HTMLDivElement>;\nexport const DropChild = forwardRef<HTMLDivElement, DropChildProps>(\n  ({ children, ...props }, ref) => {\n    return (\n      <div ref={ref} {...props}>\n        {children}\n        {props.provided?.placeholder}\n      </div>\n    );\n  }\n);\n\ntype DragProps = Omit<DraggableProps, \"children\"> & { children: ReactNode };\nexport const Drag = ({ children, ...props }: DragProps) => {\n  return (\n    <Draggable {...props}>\n      {(provided) => {\n        if (!isValidElement(children))\n          throw Error(\"Droppable 的 children 必须是一个 ReactNode\");\n        return cloneElement(children, {\n          ...provided.draggableProps,\n          ...provided.dragHandleProps,\n          ref: provided.innerRef,\n        });\n      }}\n    </Draggable>\n  );\n};\n","// Components\nimport TaskItem from \"./TaskItem\";\nimport BoardAction from \"./BoardAction\";\nimport AddTask from \"./AddTask\";\nimport styled from \"@emotion/styled\";\nimport { FlexBetween } from \"styled-components/FlexLayout\";\nimport { Drag, Drop, DropChild } from \"components/DragAndDrop\";\n\n// Types\nimport { Board } from \"types/boards\";\nimport { Task } from \"types/task\";\n\nimport { forwardRef } from \"react\";\n\nexport interface BoardItemProps {\n  board: Board;\n  tasks: Task[];\n}\n\nconst BoardItem = forwardRef<HTMLDivElement, BoardItemProps>(\n  ({ board, tasks, ...props }, ref) => (\n    <Container ref={ref} {...props}>\n      <FlexBetween>\n        <h3>{board.name}</h3>\n        <BoardAction board={board} />\n      </FlexBetween>\n      <TaskContainer>\n        <Drop\n          droppableId={`boardItem-${board.id}`}\n          type=\"ROW\"\n          direction=\"vertical\"\n        >\n          <DropChild style={{ minHeight: \"5px\" }}>\n            {tasks.map((task, index) => (\n              <Drag key={task.id} draggableId={`task-${task.id}`} index={index}>\n                <div>\n                  <TaskItem task={task} key={task.id} />\n                </div>\n              </Drag>\n            ))}\n          </DropChild>\n        </Drop>\n        <AddTask boardId={board.id} />\n      </TaskContainer>\n    </Container>\n  )\n);\n\nexport default BoardItem;\n\nexport const Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-width: 30rem;\n  border-radius: 6px;\n  background-color: rgb(244, 245, 247);\n  padding: 1rem 1.75rem;\n  margin-right: 1.5rem;\n`;\n\nconst TaskContainer = styled.div`\n  overflow: scroll;\n  flex: 1;\n  ::-webkit-scrollbar {\n    display: none;\n  }\n`;\n","// Components\nimport SubmitInput from \"./SubmitInput\";\nimport { Container as BoardContainer } from \"./BoardItem\";\nimport { Typography } from \"antd\";\n// Hooks\nimport { useState } from \"react\";\nimport { useBoardCURD } from \"page-hooks/boards\";\nimport { useProjectIdInParam } from \"page-hooks/useProjectIdInParam\";\nimport useHasQueryParams from \"hooks/useHasQueryParams\";\n\nconst AddBoard = () => {\n  const { useAddItem: useAddBoard } = useBoardCURD();\n  const { mutateAsync: addBoard, isLoading } = useAddBoard();\n  const [inputValue, setInputValue] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const projectId = useProjectIdInParam();\n  const hasQueryParam = useHasQueryParams();\n\n  const onSubmit = () => {\n    if (inputValue === \"\") {\n      setError(\"任务看板名称不能为空\");\n    } else {\n      if (error !== \"\") setError(\"\");\n      addBoard({ name: inputValue, projectId }).then(() => {\n        setInputValue(\"\");\n      });\n    }\n  };\n\n  return (\n    <BoardContainer style={{ display: hasQueryParam ? \"none\" : \"block\" }}>\n      <SubmitInput\n        placeholder=\"新建任务看板\"\n        loading={isLoading}\n        value={inputValue}\n        onChange={(e) => {\n          setInputValue(e.target.value);\n        }}\n        onSubmit={onSubmit}\n      />\n      <Typography.Text type=\"danger\" style={{ fontSize: \"13px\" }}>\n        {error}\n      </Typography.Text>\n    </BoardContainer>\n  );\n};\n\nexport default AddBoard;\n","// Components\nimport { Form, FormProps, Input, Modal, ModalProps, Spin } from \"antd\";\nimport ProjectUserSelect from \"components/projectUserSelect\";\nimport TaskTypeSelect from \"components/TaskTypeSelect\";\n// Hooks\nimport { useHistory, useRouteMatch } from \"react-router\";\nimport { useEffect, useMemo } from \"react\";\nimport { useProjectIdInParam } from \"page-hooks/useProjectIdInParam\";\nimport { useTaskCURD } from \"page-hooks/task\";\n// Types\nimport { Board } from \"types/boards\";\n\nconst EditTaskModal = () => {\n  const { path, params } = useRouteMatch<{ taskId: string; 0: string }>();\n  const boardId = Number(params.taskId) || undefined;\n  const action = params[\"0\"];\n\n  const { useGetItemById: useGetTaskById, useEditItem: useEditTask } =\n    useTaskCURD();\n  const { data, isLoading: getLoading } = useGetTaskById<Board>(\n    [\"board\", { id: boardId }],\n    boardId\n  );\n  const { mutate, isLoading: mutateLoading } = useEditTask();\n  const isLoading = getLoading || mutateLoading;\n\n  const [formInstance] = Form.useForm();\n  useEffect(() => {\n    !getLoading && formInstance.setFieldsValue(data);\n  });\n\n  const onFinish = (values: any) => {\n    mutate({ id: boardId, ...values });\n    closeModal();\n  };\n\n  const history = useHistory();\n  const projectId = useProjectIdInParam();\n  const closeModal = () => history.push(`/projects/${projectId}/boards`);\n  const visible = useMemo(\n    () => path === \"/projects/:projectId/task/:taskId/*\" && action === \"edit\",\n    [path, action]\n  );\n\n  const modalProps: ModalProps = {\n    visible,\n    forceRender: true,\n    destroyOnClose: true,\n    onOk: () => formInstance.submit(),\n    onCancel: closeModal,\n    confirmLoading: isLoading,\n    okText: \"确定\",\n    cancelText: \"退出\",\n    title: \"编辑任务\",\n  };\n\n  const formProps: FormProps = {\n    form: formInstance,\n    labelCol: { span: 4 },\n    preserve: false,\n    onFinish,\n  };\n\n  return (\n    <Modal {...modalProps}>\n      <Spin delay={200} spinning={isLoading}>\n        <Form {...formProps}>\n          <Form.Item\n            name=\"name\"\n            label=\"任务名称\"\n            rules={[{ required: true, message: \"任务名称不能为空\" }]}\n          >\n            <Input allowClear />\n          </Form.Item>\n          <Form.Item\n            name=\"processorId\"\n            label=\"负责人\"\n            rules={[{ required: true, message: \"必须指定负责人\" }]}\n          >\n            <ProjectUserSelect placeholder=\"请选择\" allowClear />\n          </Form.Item>\n          <Form.Item\n            name=\"typeId\"\n            label=\"任务类型\"\n            rules={[{ required: true, message: \"必须选择任务类型\" }]}\n          >\n            <TaskTypeSelect placeholder=\"请选择\" allowClear />\n          </Form.Item>\n        </Form>\n      </Spin>\n    </Modal>\n  );\n};\n\nexport default EditTaskModal;\n","import { Form, FormProps, Input, Modal, ModalProps, Spin } from \"antd\";\nimport { useHistory, useRouteMatch } from \"react-router\";\nimport { useBoardCURD } from \"page-hooks/boards\";\nimport { useEffect, useMemo } from \"react\";\nimport { useProjectIdInParam } from \"page-hooks/useProjectIdInParam\";\nimport { Board } from \"types/boards\";\n\nconst EditBoardModal = () => {\n  const { path, params } = useRouteMatch<{ boardId: string; 0: string }>();\n  const boardId = Number(params.boardId) || undefined;\n\n  const { useGetItemById: useGetBoardById, useEditItem: useEditBoard } =\n    useBoardCURD();\n  const { data, isLoading: getLoading } = useGetBoardById<Board>(\n    [\"board\", { id: boardId }],\n    boardId\n  );\n  const { mutate, isLoading: mutateLoading } = useEditBoard();\n  const isLoading = getLoading || mutateLoading;\n\n  const [formInstance] = Form.useForm();\n  useEffect(() => {\n    !getLoading && formInstance.setFieldsValue(data);\n  });\n\n  const onFinish = (values: any) => {\n    mutate({ id: boardId, ...values });\n    closeModal();\n  };\n\n  const history = useHistory();\n  const projectId = useProjectIdInParam();\n  const action = params[\"0\"];\n  const closeModal = () => history.push(`/projects/${projectId}/boards`);\n  const visible = useMemo(\n    () => path === \"/projects/:projectId/board/:boardId/*\" && action === \"edit\",\n    [path, action]\n  );\n\n  const modalProps: ModalProps = {\n    visible,\n    forceRender: true,\n    destroyOnClose: true,\n    onOk: () => formInstance.submit(),\n    onCancel: closeModal,\n    confirmLoading: isLoading,\n    okText: \"确定\",\n    cancelText: \"退出\",\n    title: \"编辑看板\",\n  };\n\n  const formProps: FormProps = {\n    form: formInstance,\n    labelCol: { span: 4 },\n    preserve: false,\n    onFinish,\n  };\n\n  return (\n    <Modal {...modalProps}>\n      <Spin delay={200} spinning={isLoading}>\n        <Form {...formProps}>\n          <Form.Item\n            name=\"name\"\n            label=\"看板名称\"\n            rules={[{ required: true, message: \"看板名称不能为空\" }]}\n          >\n            <Input allowClear />\n          </Form.Item>\n        </Form>\n      </Spin>\n    </Modal>\n  );\n};\n\nexport default EditBoardModal;\n","import { DragDropContext, DropResult } from \"react-beautiful-dnd\";\nimport { Drag, Drop, DropChild } from \"components/DragAndDrop\";\nimport BoardItem from \"./BoardItem\";\nimport styled from \"@emotion/styled\";\nimport { useCallback, useMemo } from \"react\";\nimport { useProjectIdInParam } from \"page-hooks/useProjectIdInParam\";\nimport { useBoardCURD, useReorderBoard } from \"page-hooks/boards\";\nimport { useReorderTask, useTaskCURD } from \"page-hooks/task\";\nimport { Task } from \"types/task\";\n\nconst DragItemContainer = styled(DropChild)`\n  display: flex;\n  flex-direction: row;\n`;\n\nconst useDragEnd = ({\n  cleanedTaskParams,\n}: {\n  cleanedTaskParams: Partial<Task>;\n}) => {\n  const { useGetItem: getBoard } = useBoardCURD();\n  const { useGetItem: getTask } = useTaskCURD();\n  const projectId = useProjectIdInParam();\n  const { data: boardData } = getBoard({ projectId });\n  const { data: taskData } = getTask(cleanedTaskParams);\n  const { mutate: reorderBoard } = useReorderBoard();\n  const { mutate: reorderTask } = useReorderTask();\n\n  const hasQueryParam = useMemo(\n    () => Boolean(Object.keys(cleanedTaskParams).length),\n    [cleanedTaskParams]\n  );\n\n  return useCallback(\n    ({ source, destination, type }: DropResult) => {\n      if (!destination || hasQueryParam) return;\n\n      // 排序看板\n      if (type === \"COLUMN\") {\n        // 被 drag 的元素 index\n        const fromId = boardData?.[source.index].id;\n        // drop 的位置的 index\n        const toId = boardData?.[destination.index].id;\n\n        if (!fromId || !toId || fromId === toId) return;\n\n        const type = destination.index > source.index ? \"after\" : \"before\";\n\n        reorderBoard({ fromId, referenceId: toId, type });\n      }\n\n      // 排序任务\n      if (type === \"ROW\") {\n        // 发生拖拽事件的容器 ID\n        const fromBoardId = Number(source.droppableId.split(\"-\")[1]);\n        // drop 时元素所处的容器 ID\n        const toBoardId = Number(destination.droppableId.split(\"-\")[1]);\n\n        // 从所有看板中筛选出来源的看板，再从中读取到是哪一个 task 被 drag 了\n        const fromTask = taskData?.filter(\n          (task) => task.kanbanId === fromBoardId\n        )[source.index];\n        // drop 的位置的 index\n        const toTask = taskData?.filter((task) => task.kanbanId === toBoardId)[\n          destination.index\n        ];\n\n        if (!fromTask || fromTask.id === toTask?.id) return;\n\n        reorderTask({\n          fromId: fromTask.id,\n          referenceId: toTask?.id || destination.index,\n          fromKanbanId: fromBoardId,\n          toKanbanId: toBoardId,\n          type:\n            fromBoardId === toBoardId && destination.index > source.index\n              ? \"after\"\n              : \"before\",\n        });\n      }\n    },\n    [boardData, hasQueryParam, reorderBoard, reorderTask, taskData]\n  );\n};\n\nconst DragDropBoards = ({\n  cleanedTaskParams,\n}: {\n  cleanedTaskParams: Partial<Task>;\n}) => {\n  const projectId = useProjectIdInParam();\n  const { useGetItem: getBoards } = useBoardCURD();\n  const { useGetItem: getTasks } = useTaskCURD(cleanedTaskParams);\n  const { data: boardsData } = getBoards({ projectId });\n  const { data: tasksData } = getTasks({ projectId, ...cleanedTaskParams });\n  const onDragEnd = useDragEnd({ cleanedTaskParams });\n  return (\n    <DragDropContext onDragEnd={onDragEnd}>\n      <Drop droppableId=\"boardsDrop\" type=\"COLUMN\" direction=\"horizontal\">\n        <DragItemContainer>\n          {boardsData?.map((board, index) => {\n            const tasks =\n              tasksData?.filter((task) => task.kanbanId === board.id) || [];\n            return (\n              <Drag\n                key={board.id}\n                draggableId={`board-${board.id}`}\n                index={index}\n              >\n                <BoardItem board={board} tasks={tasks} />\n              </Drag>\n            );\n          })}\n        </DragItemContainer>\n      </Drop>\n    </DragDropContext>\n  );\n};\n\nexport default DragDropBoards;\n","import { Spin, SpinProps } from \"antd\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\n\nconst SpinOutlined = (props: SpinProps) => {\n  const antIcon = <LoadingOutlined style={{ fontSize: 24 }} spin />;\n  return <Spin indicator={antIcon} delay={200} {...props} />;\n};\n\nexport default SpinOutlined;\n","// Components\nimport SearchPanel from \"./SearchPanel\";\nimport AddBoard from \"./AddBoard\";\nimport EditTaskModal from \"./EditTaskModal\";\nimport EditBoardModal from \"./EditBoardModal\";\nimport DragDropBoards from \"./DragDropBoards\";\nimport { FlexColumn } from \"styled-components/FlexLayout\";\nimport styled from \"@emotion/styled\";\n\n// Hooks\nimport { useMemo } from \"react\";\nimport useDocumentTitle from \"hooks/useDocumentTitle\";\nimport { useProjectCURD } from \"page-hooks/project\";\nimport { useTaskParam } from \"page-hooks/task\";\nimport { useProjectIdInParam } from \"page-hooks/useProjectIdInParam\";\n\n// Types\nimport { Project } from \"types/project\";\nimport SpinOutlined from \"../../components/LoadingOutlined\";\n\nconst Boards = () => {\n  useDocumentTitle(\"任务看板\");\n\n  const [taskParams, cleanedTaskParams, setTaskQueryParams] = useTaskParam();\n\n  // 获取 project\n  const projectId = useProjectIdInParam();\n  const { useGetItemById: getProjectById } = useProjectCURD();\n  const { data: currentProjectData, isLoading: getProjectLoading } =\n    getProjectById<Project>([\"project\", { id: projectId }], projectId);\n\n  const boardTitle = useMemo(() => {\n    if (getProjectLoading) return \"任务看板\";\n\n    return `${currentProjectData?.name || \"Unknown Project\"} · 任务看板`;\n  }, [getProjectLoading, currentProjectData]);\n\n  return (\n    <FlexColumn className=\"w-100\">\n      <h1>\n        {boardTitle}\n        <SpinOutlined\n          spinning={getProjectLoading}\n          delay={200}\n          style={{ marginLeft: \"1rem\" }}\n        />\n      </h1>\n      <SearchPanel\n        taskParams={taskParams}\n        setTaskQueryParams={setTaskQueryParams}\n      />\n      <Container>\n        <DragDropBoards cleanedTaskParams={cleanedTaskParams} />\n        <AddBoard />\n      </Container>\n      <EditTaskModal />\n      <EditBoardModal />\n    </FlexColumn>\n  );\n};\n\nexport default Boards;\n\nconst Container = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: row;\n  overflow-x: scroll;\n`;\n","import { useProjectIdInParam } from \"./useProjectIdInParam\";\nimport useCURD from \"hooks/useCURD\";\nimport { Epic } from \"../types/epic\";\n\nexport const useTaskGroupCURD = () => {\n  const projectId = useProjectIdInParam();\n  const queryKey = [\"epic\", { projectId }];\n  return useCURD<Epic>({ queryKey, finalPoint: \"/epics\" });\n};\n","import { Button } from \"antd\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { useHistory } from \"react-router\";\nimport { useTaskGroupCURD } from \"page-hooks/taskGroup\";\nimport { useProjectIdInParam } from \"page-hooks/useProjectIdInParam\";\nimport { Epic } from \"types/epic\";\nimport { deleteTaskGroupConfirm } from \"utils/createDeleteConfirm\";\n\nconst DeleteTaskGroupButton = ({ taskGroup }: { taskGroup: Epic }) => {\n  const projectId = useProjectIdInParam();\n  const history = useHistory();\n  const { useDeleteItem } = useTaskGroupCURD();\n  const { mutate } = useDeleteItem();\n\n  const onClick = () => {\n    const onOk = () => {\n      mutate(taskGroup.id);\n      onCancel();\n    };\n    const onCancel = () => history.replace(`/projects/${projectId}/task-group`);\n\n    history.push(`/projects/${projectId}/task-group/${taskGroup.id}/delete`);\n    deleteTaskGroupConfirm(taskGroup.name, onOk, onCancel);\n  };\n\n  return (\n    <Button danger size=\"small\" icon={<DeleteOutlined />} onClick={onClick} />\n  );\n};\n\nexport default DeleteTaskGroupButton;\n","import { Input, Modal, ModalProps } from \"antd\";\nimport { useState } from \"react\";\nimport { useTaskGroupCURD } from \"page-hooks/taskGroup\";\nimport { useProjectIdInParam } from \"page-hooks/useProjectIdInParam\";\nimport { useHistory, useRouteMatch } from \"react-router\";\n\nconst AddTaskGroupModal = () => {\n  const history = useHistory();\n  const { params } = useRouteMatch<{ 0: string }>();\n  const action = params[\"0\"];\n  const projectId = useProjectIdInParam();\n  const [value, setValue] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const { useAddItem } = useTaskGroupCURD();\n  const { mutate } = useAddItem();\n\n  const onOk = () => {\n    if (value === \"\" || !value) {\n      setError(\"任务组名称不能为空\");\n      return;\n    }\n    mutate({ name: value, projectId });\n    onCancel();\n  };\n  const onCancel = () => history.replace(`/projects/${projectId}/task-group`);\n\n  const modalProps: ModalProps = {\n    title: \"新建任务组\",\n    okText: \"确认\",\n    cancelText: \"取消\",\n    destroyOnClose: true,\n    visible: action === \"add-task-group\",\n    onOk,\n    onCancel,\n  };\n\n  return (\n    <Modal {...modalProps}>\n      <Input\n        placeholder=\"请输入任务组名称\"\n        allowClear\n        value={value}\n        onChange={(e) => setValue(e.target.value)}\n      />\n      <span className=\"color-danger\" style={{ fontSize: \"13px\" }}>\n        {error}\n      </span>\n    </Modal>\n  );\n};\n\nexport default AddTaskGroupModal;\n","import { FlexBetween, FlexColumn } from \"styled-components/FlexLayout\";\nimport { Button, Divider, List, Space, Typography } from \"antd\";\nimport { NavLink } from \"react-router-dom\";\nimport DeleteTaskGroupButton from \"./DeleteTaskGroupButton\";\nimport SpinOutlined from \"components/LoadingOutlined\";\n\nimport { useMemo } from \"react\";\nimport { useHistory, useLocation } from \"react-router\";\nimport { useProjectCURD } from \"page-hooks/project\";\nimport { useTaskCURD } from \"page-hooks/task\";\nimport { useProjectIdInParam } from \"page-hooks/useProjectIdInParam\";\n\nimport { useTaskGroupCURD } from \"page-hooks/taskGroup\";\nimport { ListItemMetaProps } from \"antd/es/list\";\nimport { Epic } from \"types/epic\";\nimport { Project } from \"types/project\";\n\nimport dayjs from \"dayjs\";\nimport AddTaskGroupModal from \"./AddTaskGroupModal\";\n\nconst TaskGroup = () => {\n  const history = useHistory();\n  const { pathname } = useLocation();\n  const projectId = useProjectIdInParam();\n  const { useGetItemById } = useProjectCURD();\n  const { data: currentProject, isLoading: getProjectLoading } =\n    useGetItemById<Project>([\"project\", { id: projectId }], projectId);\n  const { useGetItem: getTaskGroup } = useTaskGroupCURD();\n  const { data: taskGroups, isLoading: getTaskGroupLoading } = getTaskGroup({\n    projectId,\n  });\n  const { useGetItem: getTasks } = useTaskCURD();\n  const { data: tasks, isLoading: getTasksLoading } = getTasks({ projectId });\n  const isLoading = getProjectLoading || getTaskGroupLoading || getTasksLoading;\n\n  // 任务组标题\n  const title = useMemo(() => {\n    if (getProjectLoading) return \"任务组\";\n\n    return `${currentProject?.name || \"Unknown Project\"} · 任务组`;\n  }, [getProjectLoading, currentProject]);\n\n  const renderListItem = (taskGroup: Epic) => {\n    const listItemMeta: ListItemMetaProps = {\n      title: (\n        <FlexBetween>\n          <h3 className=\"mb-0 color-primary\">{taskGroup.name}</h3>\n          <DeleteTaskGroupButton taskGroup={taskGroup} />\n        </FlexBetween>\n      ),\n      description: (\n        <Space direction=\"vertical\" size=\"small\">\n          <Typography.Text type=\"secondary\">\n            开始时间：{dayjs(taskGroup.start).format(\"YYYY-MM-DD H:M:s\")}\n          </Typography.Text>\n          <Typography.Text type=\"secondary\">\n            结束时间：{dayjs(taskGroup.end).format(\"YYYY-MM-DD H:M:s\")}\n          </Typography.Text>\n        </Space>\n      ),\n    };\n\n    const taskLinks = () => {\n      const _tasks =\n        tasks?.filter((task) => task.epicId === taskGroup.id) || [];\n      if (!_tasks.length) return \"该任务组下没有任务\";\n      return _tasks.map((task) => (\n        <NavLink\n          key={task.id}\n          className=\"d-block\"\n          to={`/projects/${projectId}/task/${task.id}/edit`}\n        >\n          {task.name}\n        </NavLink>\n      ));\n    };\n\n    return (\n      <List.Item key={taskGroup.id}>\n        <List.Item.Meta {...listItemMeta} />\n        <div>{taskLinks()}</div>\n      </List.Item>\n    );\n  };\n\n  return (\n    <FlexColumn className=\"w-100\">\n      <FlexBetween>\n        <h1 className=\"mb-0\">\n          {title}\n          <SpinOutlined\n            spinning={isLoading}\n            delay={200}\n            style={{ marginLeft: \"1rem\" }}\n          />\n        </h1>\n        <Button onClick={() => history.push(`${pathname}/add-task-group`)}>\n          创建任务组\n        </Button>\n      </FlexBetween>\n      <Divider style={{ margin: \"1rem 0\" }} />\n      <List\n        dataSource={taskGroups || []}\n        itemLayout=\"vertical\"\n        renderItem={renderListItem}\n      />\n      <AddTaskGroupModal />\n    </FlexColumn>\n  );\n};\n\nexport default TaskGroup;\n","import { useHistory } from \"react-router\";\n\nconst DefaultRouteNavigation = ({ to }: { to: string }) => {\n  const history = useHistory();\n  history.replace(to);\n  return <div>跳转中...</div>;\n};\n\nexport default DefaultRouteNavigation;\n","// Components\nimport Boards from \"pages/boards\";\nimport TaskGroup from \"pages/task-group\";\nimport { Layout, Menu } from \"antd\";\nimport { Route, Switch, useLocation, useRouteMatch } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Content,\n  ContentContainer,\n  FlexRowMain,\n} from \"styled-components/ContentScreenLayout\";\n\n// Hooks\nimport { useMemo } from \"react\";\nimport DefaultRouteNavigation from \"../../components/DefaultRouteNavigation\";\n\nconst SubMenu = () => {\n  const { Sider } = Layout;\n  const { url } = useRouteMatch();\n  const { pathname } = useLocation();\n\n  const currentActive = useMemo(() => {\n    const pathArray = pathname.split(\"/\");\n    return pathArray[pathArray.length - 1];\n  }, [pathname]);\n\n  return (\n    <Sider theme=\"light\">\n      <Menu mode=\"inline\" theme=\"light\" selectedKeys={[currentActive]}>\n        <Menu.Item key=\"boards\" style={{ marginTop: 0 }}>\n          <Link to={`${url}/boards`}>看板</Link>\n        </Menu.Item>\n        <Menu.Item key=\"task-group\">\n          <Link to={`${url}/task-group`}>任务组</Link>\n        </Menu.Item>\n      </Menu>\n    </Sider>\n  );\n};\n\nconst Project = () => {\n  const { url, path } = useRouteMatch();\n  return (\n    <FlexRowMain>\n      <SubMenu />\n      <ContentContainer>\n        <Content>\n          <Switch>\n            <Route path={`${path}/boards`} component={Boards} />\n            <Route path={`${path}/board/:boardId/*`} component={Boards} />\n            <Route path={`${path}/task/:taskId/*`} component={Boards} />\n            <Route exact path={`${path}/task-group`} component={TaskGroup} />\n            <Route path={`${path}/task-group/*`} component={TaskGroup} />\n            <Route\n              path={url}\n              render={() => <DefaultRouteNavigation to={`${url}/boards`} />}\n            />\n          </Switch>\n        </Content>\n      </ContentContainer>\n    </FlexRowMain>\n  );\n};\n\nexport default Project;\n","// Component\nimport { FlexColumnMain } from \"styled-components/ContentScreenLayout\";\nimport { FlexBetween } from \"styled-components/FlexLayout\";\nimport { Button } from \"antd\";\nimport { Route, Switch } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport SearchForm from \"./search-form\";\nimport List from \"./list\";\nimport ProjectModal from \"./project-modal\";\nimport Project from \"pages/project\";\n\n// Hooks\nimport useDocumentTitle from \"hooks/useDocumentTitle\";\nimport { useProjectCURD, useProjectParam } from \"page-hooks/project\";\nimport { useGetProjectUsers } from \"page-hooks/projectUsers\";\n\nconst ProjectList = () => {\n  useDocumentTitle(\"项目列表\");\n\n  const [param, cleanedParam, setParam] = useProjectParam();\n  const { data: users } = useGetProjectUsers();\n  const { useGetItem: useGetProject } = useProjectCURD();\n  const { data: projectList, isLoading: tableLoading } =\n    useGetProject(cleanedParam);\n\n  return (\n    <FlexColumnMain style={{ padding: \"1.5rem 3.2rem 0\" }}>\n      <FlexBetween>\n        <h1>项目列表</h1>\n        <Link to=\"/projects/create-project\">\n          <Button>新建项目</Button>\n        </Link>\n      </FlexBetween>\n      <SearchForm param={param} setParam={setParam} users={users || []} />\n      <List\n        tableLoading={tableLoading}\n        users={users || []}\n        dataSource={projectList || []}\n      />\n      <ProjectModal />\n    </FlexColumnMain>\n  );\n};\n\nconst ProjectListScreen = () => (\n  <Switch>\n    {/*创建项目*/}\n    <Route exact path=\"/projects/create-project\" component={ProjectList} />\n    {/*指定 projectId 编辑*/}\n    <Route exact path=\"/projects/:projectId/edit\" component={ProjectList} />\n    {/*指定 projectId 删除*/}\n    <Route exact path=\"/projects/:projectId/delete\" component={ProjectList} />\n    {/*项目详情（看板、任务组）*/}\n    <Route path=\"/projects/:projectId\" component={Project} />\n    <Route path=\"\" component={ProjectList} />\n  </Switch>\n);\n\nexport default ProjectListScreen;\n","// Components\nimport { Route, Switch } from \"react-router\";\nimport AuthenticatedAppHeader from \"components/authenticatedAppHeader\";\nimport ProjectListScreen from \"pages/project-list\";\nimport DefaultRouteNavigation from \"components/DefaultRouteNavigation\";\n\nconst AuthenticatedApp = () => {\n  return (\n    <div style={{ height: \"100vh\" }}>\n      <AuthenticatedAppHeader />\n      <div>\n        <Switch>\n          <Route path=\"/projects\" component={ProjectListScreen} />\n          <Route\n            path=\"/*\"\n            render={() => <DefaultRouteNavigation to={\"/projects\"} />}\n          />\n        </Switch>\n      </div>\n    </div>\n  );\n};\n\nexport default AuthenticatedApp;\n","// Components\nimport FullPageLoading from \"components/full-page-loading\";\nimport UnauthenticatedApp from \"./unauthenticated-app\";\nimport AuthenticatedApp from \"./authenticated-app\";\n\n// utils\nimport { getToken } from \"context/auth-provider\";\n\n// Hooks\nimport useAuth from \"hooks/useAuth\";\n\nconst App = () => {\n  const { user } = useAuth();\n  if (!user && getToken()) return <FullPageLoading />;\n  return (\n    // 如果 Context user 存在（不存在的话整个 Context 都是 undefined） 则渲染 Authenticated 组件 否则渲染 Unauthenticted 组件\n    user ? <AuthenticatedApp /> : <UnauthenticatedApp />\n  );\n};\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport AppProviders from \"context\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { loadDevTools } from \"jira-dev-tool\";\nimport App from \"./App\";\n\nimport \"./App.css\";\nimport \"antd/dist/antd.less\";\n\n\nloadDevTools(() => {\n  ReactDOM.render(\n    <React.StrictMode>\n      <AppProviders>\n        <BrowserRouter basename=\"imooc-jira\">\n          <App />\n        </BrowserRouter>\n      </AppProviders>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n  );\n});\n"],"sourceRoot":""}